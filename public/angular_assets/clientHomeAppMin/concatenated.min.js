angular.module("clientHomeApp",["ui.bootstrap","angular-loading-bar","cfp.loadingBar","angulartics","angulartics.google.analytics","angularMoment","ui.router","duScroll","ngFx","ngAnimate","textAngular","ngSanitize","angularUtils.directives.dirDisqus","ui.utils"]).run(["$templateCache","$http","$rootScope","$state","$stateParams",function(t,e,n,o,r){n.$state=o,n.$stateParams=r}]).config(["$stateProvider","$urlRouterProvider","$locationProvider",function(t,e,n){e.when("/home/stream/","/home/stream/1").when("/home/post/","/home").when("/home/editPost/","/home").when("/home/search/","/home/").otherwise("/home"),t.state("home",{url:"/home",templateUrl:"views/client/partials/views/home.html"}).state("home.stream",{url:"/stream/:pageNumber",templateUrl:"views/client/partials/views/post_stream.html"}).state("home.post",{url:"/post/:postIndex",templateUrl:"views/client/partials/views/full_post.html"}).state("home.search",{url:"/search/:queryString/:pageNumber",templateUrl:"views/search/search_results.html"}).state("otherwise",{url:"/home"}),n.html5Mode(!1).hashPrefix("!")}]),angular.module("clientHomeApp").directive("accountStatusBanner",["$rootScope","socketService","globals","$location","$window",function(t,e,n,o,r){return{scope:{},templateUrl:"views/general/smalls/account_status.html",restrict:"AE",link:function(n,s,a){function i(){e.getUserData().success(function(t){n.theUser=t.userData,1==t.userData.isRegistered&&(n.accountStatusBanner=u(t.userData),c(t.userData))}).error(function(){n.accountStatusBanner={show:!0,bannerClass:"alert alert-warning",msg:"An error has occurred. Please reload page"}})}function u(t){return t.isRegistered?t.emailIsConfirmed?t.isApproved===!1?{show:!0,bannerClass:"alert alert-warning",msg:"Your account is awaiting approval from the administrators. Please allow up to 3 business days. You will get an email notification as soon as your account is approved.",showResendEmail:!1}:t.isBanned&&t.isBanned.status===!0?{show:!0,bannerClass:"alert alert-warning",msg:"Your have been banned from this service. Please contact the administrators for more information",showResendEmail:!1}:{show:!1,bannerClass:"",msg:"",showResendEmail:!1}:{show:!0,bannerClass:"alert alert-warning",msg:"Please confirm your account by clicking the confirmation link we sent on your email. Please also check your spam folder",showResendEmail:!0}:{show:!1,bannerClass:"",msg:"",showResendEmail:!1}}function c(t){n.checkAccount(t)||(r.location.href=o.port()?"http://"+o.host()+":"+o.port()+"/index":"http://"+o.host()+"/index")}n.accountStatusBanner={show:!1,bannerClass:"",msg:"",showResendEmail:!1},n.resendConfirmationEmail=function(n){e.resendConfirmationEmail(n).success(function(e){t.main.responseStatusHandler(e)}).error(function(e){t.main.responseStatusHandler(e)})},i(),n.checkAccount=function(t){return t&&t.isRegistered&&t.emailIsConfirmed&&t.isApproved&&!t.isBanned.status?!0:!1},t.$on("userDataChanges",function(){}),t.$on("reconnect",function(){i()})}}}]).directive("universalBanner",["$rootScope",function(t){return{templateUrl:"views/client/partials/smalls/universal_banner.html",restrict:"AE",link:function(e,n,o){e.universalBanner={show:!1,bannerClass:"",msg:""},t.$on("universalBanner",function(t,n){e.universalBanner=n}),t.$on("clearBanners",function(){e.universalBanner={show:!1,bannerClass:"",msg:""}})}}}]).directive("newPostBanner",["$rootScope",function(t){return{templateUrl:"views/client/partials/smalls/new_post_banner.html",restrict:"AE",link:function(e,n,o){e.newPostBanner={show:!1,bannerClass:"",msg:""},t.$on("newPostBanner",function(t,n){e.newPostBanner=n}),t.$on("clearBanners",function(){e.newPostBanner={show:!1,bannerClass:"",msg:""}})}}}]).directive("toastrDirective",["$rootScope",function(t){return{restrict:"AE",link:function(e,n,o){t.showToast=function(t,e){switch(t){case"success":toastr.clear(),toastr.success(e);break;case"warning":toastr.clear(),toastr.warning(e,"Warning",{closeButton:!0,tapToDismiss:!0});break;case"error":toastr.clear(),toastr.error(e,"Error",{closeButton:!0,tapToDismiss:!0,timeOut:!1});break;default:toastr.clear()}},t.clearToasts=function(){toastr.clear()}}}}]).directive("loadingBanner",["$rootScope",function(t){var e=["$scope","$rootScope","cfpLoadingBar",function(t,e,n){e.isLoading=!0,e.isLoadingPercentage=0,e.changeIsLoadingPercentage=function(t){e.isLoadingPercentage=t},e.showHideLoadingBanner=function(t){t?($("#loading-splash-card").removeClass("hidden"),$(".hideMobileLoading").addClass("hidden-xs hidden-sm")):($("#loading-splash-card").addClass("hidden"),$(".hideMobileLoading").removeClass("hidden-xs hidden-sm"))},e.$on("cfpLoadingBar:loading",function(t,o){e.isLoadingPercentage=100*n.status()}),e.$on("cfpLoadingBar:loaded",function(t,o){e.isLoadingPercentage=100*n.status()}),e.$on("cfpLoadingBar:completed",function(t,o){e.isLoadingPercentage=100*n.status()}),e.isLoadingTrue=function(){e.isLoading=!0},e.isLoadingFalse=function(){e.isLoading=!1},e.$on("isLoadingTrue",function(){e.isLoading=!0}),e.$on("isLoadingFalse",function(){e.isLoading=!1})}];return{templateUrl:"views/client/partials/smalls/loading_banner.html",restrict:"AE",controller:e}}]),angular.module("clientHomeApp").directive("fullPost",["$q","$log","$rootScope","globals","PostService","fN",function(t,e,n,o,r,s){return{templateUrl:"views/client/partials/smalls/post_full.html",restrict:"AE",link:function(t,e,a){function i(){r.getPostFromServer(n.$stateParams.postIndex).success(function(e){n.main.responseStatusHandler(e),0!=s.calcObjectLength(e.thePost)?(t.post=r.updatePost(e.thePost),o.changeDocumentTitle(t.post.postHeading),n.main.goToTop(),t.showDisqus&&(t.postIsLoaded=!0)):(t.post=r.updatePost({}),n.main.goToTop())}).error(function(e){n.main.responseStatusHandler(e),t.post=r.updatePost({})})}t.post=r.getCurrentPost(),t.postIsLoaded=!1,i(),n.$on("postUpdate",function(e,o){n.$stateParams.postIndex==o.post.postIndex&&(t.post=r.updatePost(o.post))}),n.$on("reconnect",function(){n.isEditingPost||"home.post"==n.$state.current.name&&i()})}}}]),angular.module("clientHomeApp").directive("postStreamPager",["$rootScope","PostService",function(t,e){return{templateUrl:"views/general/smalls/pager.html",restrict:"AE",link:function(n,o,r){n.pagingMaxSize=5,n.numPages=5,n.itemsPerPage=10,n.pagingTotalCount=1,n.$watch(e.getCurrentPostsCount,function(t,e){n.pagingTotalCount=t}),n.currentPage=t.$stateParams.pageNumber,t.$on("$stateChangeSuccess",function(e,o,r,s,a){s.name!=o.name&&"home"!=t.$state.current.name&&(n.currentPage=t.$stateParams.pageNumber)}),n.goToPage=function(){"home"==t.$state.current.name?t.$state.go("home.stream",{pageNumber:n.currentPage}):t.$state.go(t.$state.current.name,{pageNumber:n.currentPage})}}}}]).directive("mainSearchResultsPager",["$rootScope","PostService",function(t,e){return{templateUrl:"views/general/smalls/pager.html",restrict:"AE",link:function(n,o,r){n.pagingMaxSize=5,n.numPages=5,n.itemsPerPage=10,n.pagingTotalCount=1,n.$watch(e.getCurrentMainSearchResultsCount,function(t,e){n.pagingTotalCount=t}),n.currentPage=t.$stateParams.pageNumber,t.$on("$stateChangeSuccess",function(e,o,r,s,a){s.name!=o.name&&"home"!=t.$state.current.name&&(n.currentPage=t.$stateParams.pageNumber)}),n.goToPage=function(){"home"==t.$state.current.name?t.$state.go("home.stream",{pageNumber:n.currentPage}):t.$state.go(t.$state.current.name,{pageNumber:n.currentPage})}}}}]),angular.module("clientHomeApp").directive("postStream",["$q","$log","$rootScope","globals","PostService",function(t,e,n,o,r){return{templateUrl:"views/general/smalls/post_feed.html",restrict:"AE",link:function(t,e,s){function a(e){function o(e){r.getPostsFromServer(e).success(function(n){n.postsArray.length>0?(t.allPosts[e]=r.updatePosts(n.postsArray,e),n.postsCount&&(t.allPostsCount=r.updateAllPostsCount(n.postsCount))):t.allPosts[e]=r.updatePosts([])}).error(function(o){n.main.responseStatusHandler(o),t.allPosts[e]=r.updatePosts([])})}t.allPosts.hasOwnProperty(e)?t.allPosts[e].length>0||o(e):o(e)}o.defaultDocumentTitle(),t.allPosts=r.getAllPosts(),n.main.goToTop(),t.allPostsCount=r.getAllPostsCount(),t.showMore=function(t){a(t)},a(1),n.$on("newPost",function(e,n){r.addNewToPosts(n.post),n.postsCount&&(t.allPostsCount=r.updateAllPostsCount(n.postsCount))}),n.$on("reconnect",function(){"home"==n.$state.current.name||"home.stream"==n.$state.current.name})}}}]),angular.module("clientHomeApp").directive("postContent",[function(){return{templateUrl:"views/client/partials/smalls/post_content.html",scope:{postContent:"=model"},restrict:"AE",link:function(t,e,n){}}}]).directive("postSummary",[function(){return{templateUrl:"views/client/partials/smalls/post_summary.html",scope:{postSummary:"=model"},restrict:"AE",link:function(t,e,n){}}}]).directive("postTags",[function(){return{templateUrl:"views/client/partials/smalls/post_tags.html",scope:{postTags:"=model"},restrict:"AE",link:function(t,e,n){}}}]),angular.module("clientHomeApp").directive("titleDirective",["globals",function(t){return{template:'<title ng-bind="defaultTitle"></title>',restrict:"AE",link:function(e,n,o){e.defaultTitle=t.getDocumentTitle(),e.$watch(t.getDocumentTitle,function(){e.defaultTitle=t.getDocumentTitle()})}}}]).directive("topNav",["$rootScope","logoutService",function(t,e){return{templateUrl:"views/client/partials/views/top_nav.html",restrict:"AE",link:function(n,o,r){n.logoutClient=function(){e.logoutClient().success(function(e){t.main.responseStatusHandler(e)}).error(function(e){t.main.responseStatusHandler(e)})}}}}]).directive("contactUs",["$rootScope","socketService",function(t,e){return{templateUrl:"views/general/smalls/contact_us.html",restrict:"AE",link:function(n,o,r){function s(e,n,o){var r=0;return e&&0!=e.length?n&&0!=n.length?o&&0!=o.length?0==r?1:void 0:(++r,t.showToast("warning","Message field is empty"),-1):(++r,t.showToast("warning","Please enter a valid email"),-1):(++r,t.showToast("warning","Please enter your name"),-1)}n.contactUsModel={name:"",email:"",message:""},n.sendContactUs=function(){var o=s(n.contactUsModel.name,n.contactUsModel.email,n.contactUsModel.message);1==o&&e.sendContactUs(n.contactUsModel).success(function(e){n.contactUsModel.name="",n.contactUsModel.email="",n.contactUsModel.message="",t.responseStatusHandler(e)}).error(function(e){t.responseStatusHandler(e)})}}}}]).directive("mainFooter",[function(){return{templateUrl:"views/general/smalls/main_footer.html",restrict:"AE",link:function(t,e,n){}}}]),angular.module("clientHomeApp").directive("suggestedPosts",["$rootScope","PostService",function(t,e){return{templateUrl:"views/client/partials/smalls/suggested_posts.html",restrict:"AE",link:function(n,o,r){function s(){e.getSuggestedPostsFromServer().success(function(o){o.postsArray.length>0?(n.suggestedPosts=e.updateSuggestedPosts(o.postsArray),t.main.goToTop()):(n.suggestedPosts=[],t.main.goToTop())}).error(function(o){t.main.responseStatusHandler(o),n.suggestedPosts=e.updateSuggestedPosts([]),t.main.goToTop()})}n.suggestedPosts=e.getSuggestedPosts(),s()}}}]),angular.module("clientHomeApp").directive("universalSearchBox",["$window","$location","$rootScope",function(t,e,n){return{templateUrl:"views/client/partials/smalls/universal_search_box.html",restrict:"AE",link:function(o,r,s){o.mainSearchModel={queryString:"",postSearchUniqueCuid:"",requestedPage:1},o.fillSearchBox=function(){o.mainSearchModel.queryString="home.search"==n.$state.current.name?n.$stateParams.queryString?n.$stateParams.queryString:"":n.stateHistory.length>0&&n.stateHistory[n.stateHistory.length-1].hasOwnProperty("search")?n.stateHistory[n.stateHistory.length-1].search.queryString:""},o.fillSearchBox(),o.performMainSearch=function(){o.mainSearchModel.queryString.length>0&&(t.location.href=e.port()?"http://"+e.host()+":"+e.port()+"/#!/home/search/"+o.mainSearchModel.queryString+"/1":"http://"+e.host()+"/#!/home/search/"+o.mainSearchModel.queryString+"/1")}}}}]),angular.module("clientHomeApp").controller("HotController",["$q","$log","$scope","$rootScope","HotService",function(t,e,n,o,r){function s(){r.getHotThisWeekFromServer().success(function(t){n.hotThisWeek=r.updateHotThisWeek(t.hotThisWeek)}).error(function(t){n.hotThisWeek=r.updateHotThisWeek([]),o.main.responseStatusHandler(t)})}n.hotThisWeek=r.getHotThisWeek(),s(),o.$on("reconnect",function(){s()})}]),angular.module("clientHomeApp").controller("MainController",["$q","$filter","$log","$interval","$window","$location","$scope","$rootScope","socket","socketService","globals","$document",function(t,e,n,o,r,s,a,i,u,c,l,m){function g(){c.getUserData().success(function(t){a.userData=l.userData(t.userData),i.main.broadcastUserData(),i.main.clientIsRegistered=a.userData.isRegistered,a.userData.isRegistered&&u.emit("joinRoom",{room:t.userData.uniqueCuid}),i.main.responseStatusHandler(t)}).error(function(t){i.main.responseStatusHandler(t)})}a.indexPageUrl=l.allData.indexPageUrl,a.showDisqus=-1!==s.host().search("negusmath");var p=0;i.main={currentTime:"",clientIsRegistered:!1,showLoadingBannerDir:!1,showLoadingBanner:function(){this.showLoadingBannerDir=!0},hideLoadingBanner:function(){this.showLoadingBannerDir=!1},goToTop:function(){var t=angular.element(document.getElementById("top"));m.scrollToElement(t,80,p)},broadcastUserData:function(){i.$broadcast("userDataChanges")},responseStatusHandler:function(t){e("responseFilter")(t)},clearBanners:function(){i.$broadcast("clearBanners")}},i.main.currentTime=moment().format("ddd, MMM D, H:mm");var d=function(){i.main.currentTime=moment().format("ddd, MMM D, H:mm")};o(d,2e4,0,!0),g();var h=[];i.stateHistory=[],i.$on("$stateChangeSuccess",function(t,e,n,o,r){h.push(s.$$path);var a={};a[o.name]=r,i.stateHistory.push(a)}),i.back=function(){var t=h.length>1?h.splice(-2)[0]:"/";s.path(t)},i.$on("$stateChangeStart",function(t,e,n,o,r){i.main.clearBanners(),i.clearToasts(),i.isEditingPost=!1}),i.$on("reconnect",function(){g()})}]),angular.module("clientHomeApp").controller("SearchController",["$q","$log","$scope","$rootScope","globals","PostService",function(t,e,n,o,r,s){function a(t){n.mainSearchModel={queryString:o.$stateParams.queryString||"",postSearchUniqueCuid:n.mainSearchModel.postSearchUniqueCuid,requestedPage:t},s.mainSearch(n.mainSearchModel).success(function(e){if(e.results.totalResults>0){var r=e.results;n.mainSearchResultsPosts[t]=s.updateMainSearchResults(r.postsArray,t),n.mainSearchResultsCount=s.updateMainSearchResultsCount(r.totalResults),n.mainSearchModel.postSearchUniqueCuid=r.searchUniqueCuid;var a={banner:!0,bannerClass:"alert alert-dismissible alert-success",msg:"The search returned "+n.mainSearchResultsCount+" results"};o.main.responseStatusHandler(a)}else{n.mainSearchResultsPosts[t]=s.updateMainSearchResults([]),n.mainSearchResultsCount=s.updateMainSearchResultsCount(0);var i={banner:!0,bannerClass:"alert alert-dismissible alert-success",msg:"The search returned 0 results"};o.main.responseStatusHandler(i)}}).error(function(e){o.main.responseStatusHandler(e),n.mainSearchResultsPosts[t]=s.updateMainSearchResults([]),n.mainSearchResultsCount=s.updateMainSearchResultsCount(0)})}o.main.goToTop(),n.mainSearchModel={queryString:o.$stateParams.queryString||"",postSearchUniqueCuid:"",requestedPage:1},r.changeDocumentTitle(o.$stateParams.queryString+" - NegusMath Search"),n.mainSearchResultsPosts=s.getAllMainSearchResults(),n.mainSearchResultsCount=0,a(1),n.showMore=function(t){a(t)},o.$on("reconnect",function(){"home.search"==o.$state.current.name&&a()})}]),angular.module("clientHomeApp").filter("timeago",function(){return function(t,e,n){if(!t)return"never";if(e||(e=Date.now()),angular.isDate(t)?t=t.getTime():"string"==typeof t&&(t=new Date(t).getTime()),angular.isDate(e)?e=e.getTime():"string"==typeof e&&(e=new Date(e).getTime()),"number"==typeof t&&"number"==typeof e){var o=Math.abs((e-t)/1e3),r=[],s=60,a=3600,i=86400,u=604800,c=31556926,l=315569260;return r=s>=o?["",n?"now":"less than a minute"]:60*s>o?[Math.round(Math.abs(o/s)),"min"]:24*a>o?[Math.round(Math.abs(o/a)),"hr"]:7*i>o?[Math.round(Math.abs(o/i)),"day"]:52*u>o?[Math.round(Math.abs(o/u)),"week"]:10*c>o?[Math.round(Math.abs(o/c)),"year"]:100*l>o?[Math.round(Math.abs(o/l)),"decade"]:["","a long time"],r[1]+=0===r[0]||r[0]>1?"s":"",r=r.join(" "),n===!0?r:e>=t?r+" ago":"in "+r}}}).filter("getTimeAgo",["$filter",function(t){return function(e){return t("timeago")(e)}}]).filter("getPostDate",[function(){return function(t){return moment(t).format("ddd, MMM D, H:mm")}}]).filter("getPostAbsoluteUrl",[function(){return function(t){return"http://www.negusmath.com/#!/home/post/"+t}}]).filter("getPostPath",[function(){return function(t){return"/#!/home/post/"+t}}]).filter("makeVideoIframesResponsive",[function(){return function(t,e){function n(t){return t.postSummary&&(o=$("<div>"+t.postSummary+"</div>"),r=$("img.ta-insert-video",o),r.length>0&&(s=r.addClass("embed-responsive-item").wrap("<div class='embed-responsive embed-responsive-16by9'></div>"),o.find("img").replaceWith(s)),t.postSummary=o.html()),t.postContent&&(o=$("<div>"+t.postContent+"</div>"),r=$("img.ta-insert-video",o),r.length>0&&(s=r.addClass("embed-responsive-item").wrap("<div class='embed-responsive embed-responsive-16by9'></div>"),o.find("img").replaceWith(s)),t.postContent=o.html()),t}var o,r,s;return t?n(t):e?(e.forEach(function(t,o){e[o]=n(t)}),e):void 0}}]).filter("getVideoResponsiveVersion",[function(){return function(t){function e(t){return n=$("<div>"+t+"</div>"),o=$("img.ta-insert-video",n),o.length>0&&(r=o.addClass("embed-responsive-item").wrap("<div class='embed-responsive embed-responsive-16by9'></div>"),n.find("img").replaceWith(r)),n.html()}var n,o,r;return t?e(t):t}}]).filter("highlightText",["$rootScope",function(t){return function(e,n){function o(){return"home.search"==t.$state.current.name?{status:!0,queryString:t.$stateParams.queryString||""}:t.stateHistory.length>0&&t.stateHistory[t.stateHistory.length-1].hasOwnProperty("home.search")&&"home.post"==t.$state.current.name?{status:!0,queryString:t.stateHistory[t.stateHistory.length-1]["home.search"].queryString}:{status:!1}}function r(t){if(n){var e=t,r=o();if(r.status===!0){var s=$("<div>"+t+"</div>");$(s).highlight(r.queryString),e=s.html()}else{var a=$("<div>"+t+"</div>");$(a).removeHighlight(),e=a.html()}}else{var i=$("<div>"+t+"</div>");$(i).removeHighlight(),e=i.html()}return e}return r(e)}}]).filter("preparePosts",["$filter",function(t){return function(e,n){function o(e){return e.forEach(function(n,o){e[o].text=t("highlightText")(n.text,!0)}),e}function r(e){return e.timeAgo=t("getTimeAgo")(e.createdAt),e.postDate=t("getPostDate")(e.createdAt),e.postAbsoluteUrl=t("getPostAbsoluteUrl")(e.postIndex),e.postPath=t("getPostPath")(e.postIndex),e.postHeading=t("highlightText")(e.postHeading,!0),e.authorName=t("highlightText")(e.authorName,!0),e.postSummary=t("highlightText")(t("getVideoResponsiveVersion")(e.postSummary),!0),e.postContent=t("highlightText")(t("getVideoResponsiveVersion")(e.postContent),!0),e.postTags=o(e.postTags),e}return e?r(e):n?(n.forEach(function(t,e){n[e]=r(t)}),n):void 0}}]).filter("removeHighlights",["$filter",function(t){return function(e,n){function o(e){return e.forEach(function(n,o){e[o].text=t("highlightText")(n.text,!1)}),e}function r(e){return e.timeAgo=t("getTimeAgo")(e.createdAt),e.postDate=t("getPostDate")(e.createdAt),e.postAbsoluteUrl=t("getPostAbsoluteUrl")(e.postIndex),e.postPath=t("getPostPath")(e.postIndex),e.postHeading=t("highlightText")(e.postHeading,!1),e.authorName=t("highlightText")(e.authorName,!1),e.postSummary=t("highlightText")(e.postSummary,!1),e.postContent=t("highlightText")(e.postContent,!1),e.postTags=o(e.postTags),e}return e?r(e):n?(n.forEach(function(t,e){n[e]=r(t)}),n):void 0}}]).filter("preparePostsNoChange",["$filter",function(t){return function(e,n){function o(e){return e.timeAgo=t("getTimeAgo")(e.createdAt),e.postDate=t("getPostDate")(e.createdAt),e.postAbsoluteUrl=t("getPostAbsoluteUrl")(e.postIndex),e.postPath=t("getPostPath")(e.postIndex),e}return e?o(e):n?(n.forEach(function(t,e){n[e]=o(t)}),n):void 0}}]).filter("responseFilter",["$q","$log","$window","$rootScope",function(t,e,n,o){return function(t){function r(t,e,n){return{show:t?!0:!1,bannerClass:e,msg:n}}return t&&(t.redirect&&t.redirect&&(n.location.href=t.redirectPage),t.notify&&t.type&&t.msg&&o.showToast(t.type,t.msg),t.banner&&t.bannerClass&&t.msg&&o.$broadcast("universalBanner",r(!0,t.bannerClass,t.msg)),t.newPostBanner&&t.bannerClass&&t.msg&&o.$broadcast("newPostBanner",r(!0,t.bannerClass,t.msg)),t.registrationBanner&&t.bannerClass&&t.msg&&o.$broadcast("registrationBanner",r(!0,t.bannerClass,t.msg)),t.reason&&e.warn(t.reason)),!0}}]),angular.module("clientHomeApp").factory("fN",[function(){return{calcObjectLength:function(t){var e=0;for(var n in t)t.hasOwnProperty(n)&&e++;return e}}}]),angular.module("clientHomeApp").factory("globals",["$q","$location",function(t,e){var n={},o={documentTitle:"Negus Math - College Level Advanced Mathematics for Kenya Students",indexPageUrl:e.port()?"http://"+e.host()+":"+e.port()+"/index":$scope.indexPageUrl="http://"+e.host()+"/index"};return{userData:function(t){return t?n=t:n},allData:o,getDocumentTitle:function(){return o.documentTitle},defaultDocumentTitle:function(){o.documentTitle="Negus Math - College Level Advanced Mathematics for Kenya Students"},changeDocumentTitle:function(t){return t&&(o.documentTitle=t),o.documentTitle},getLocationHost:function(){return e.port()?"http://"+e.host()+":"+e.port():"http://"+e.host()}}}]),angular.module("clientHomeApp").factory("HotService",["$filter","$log","$rootScope","socket","$http",function(t,e,n,o,r){var s=[];return o.on("hotThisWeekPosts",function(t){n.$broadcast("hotThisWeekPosts",t)}),{getHotThisWeek:function(){return s},getHotThisWeekFromServer:function(){return r.post("/api/getHotThisWeek",{})},updateHotThisWeek:function(e){return s=e==[]?[]:t("preparePostsNoChange")(null,e),e}}}]),angular.module("clientHomeApp").factory("mainService",["$log","$rootScope","socket",function(t,e,n){return n.on("reconnect",function(){t.info("'reconnect sequence' triggered"),e.$broadcast("reconnect")}),{done:function(){return 1}}}]),angular.module("clientHomeApp").factory("PostService",["$filter","$http","$window","$rootScope","socket",function(t,e,n,o,r){var s={},a={},i={},u=0,c={},l=0,m=[];return r.on("newPost",function(t){o.$broadcast("newPost",t)}),r.on("postUpdate",function(t){o.$broadcast("postUpdate",t)}),{getAllPosts:function(){return i},getPosts:function(t){return t?i[t]:[]},getAllPostsCount:function(){return u},getPostsFromServer:function(t){return e.post("/api/getPosts",{page:t})},updatePosts:function(e,n){return i[n]=e==[]?[]:t("preparePosts")(null,e),i[n]},updateAllPostsCount:function(t){return u=t},addNewToPosts:function(e){function n(n){return n=e=={}?{}:t("preparePosts")(n,null)}var o=n(e);return i[1].unshift(o),i},getCurrentPost:function(t){return t?s[t]:{}},getPostFromServer:function(t){return e.post("/api/getPost",{postIndex:t})},updatePost:function(e){return e=={}?s={}:s[e.postIndex]=t("preparePosts")(e,null),s[e.postIndex]},getCurrentEditPostModel:function(){return a=={}?{}:a},getCurrentEditPostModelFromServer:function(t){return e.post("/api/getPost",{postIndex:t})},updateCurrentEditPostModel:function(e){return a=e=={}?{}:t("preparePostsNoChange")(e,null)},getAllMainSearchResults:function(){return c},getMainSearchResultsCount:function(t){return l[t]},mainSearch:function(t){return e.post("/api/mainSearch",t)},updateMainSearchResults:function(e,n){return c[n]=e==[]?[]:t("preparePosts")(null,e),c[n]},updateMainSearchResultsCount:function(t){return l=t},getSuggestedPosts:function(){return m},getSuggestedPostsFromServer:function(){return e.post("/api/getSuggestedPosts",{})},updateSuggestedPosts:function(e){return m=e==[]?[]:t("preparePostsNoChange")(null,e)},submitNewPost:function(t){return e.post("/api/newPost",{newPost:t})},submitPostUpdate:function(t){return e.post("/api/updatePost",{postUpdate:t})}}}]),angular.module("clientHomeApp").factory("socket",["$log","$location","$rootScope",function(t,e,n){var o;o=e.port()?e.host()+":"+e.port():e.host();var r=io.connect(o);return{on:function(t,e){r.on(t,function(){var t=arguments;n.$apply(function(){e.apply(r,t)})})},emit:function(t,e,o){r.emit(t,e,function(){var t=arguments;n.$apply(function(){o&&o.apply(r,t)})})},removeAllListeners:function(t,e){r.removeAllListeners(t,function(){var t=arguments;n.$apply(function(){e.apply(r,t)})})}}}]).factory("socketService",["$log","$http","$rootScope",function(t,e){return{getUserData:function(){return e.get("/api/getUserData")},resendConfirmationEmail:function(t){return e.post("/resendConfirmationEmail",{userUniqueCuid:t})},sendContactUs:function(t){return e.post("/contactUs",t)}}}]).factory("logoutService",["$http",function(t){return{logoutClient:function(){return t.post("/api/logoutClient")}}}]);
//# sourceMappingURL=concatenated.min.js.map