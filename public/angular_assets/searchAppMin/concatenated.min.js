angular.module("searchApp",["ui.bootstrap","angular-loading-bar","cfp.loadingBar","angulartics","angulartics.google.analytics","angularMoment","ui.router","duScroll","ngFx","ngAnimate"]).run(["$templateCache","$http",function(e,n){n.get("views/client/partials/views/post_stream.html",{cache:e}),n.get("views/client/partials/views/full_post.html",{cache:e}),n.get("views/search/search_results.html",{cache:e})}]),angular.module("searchApp").filter("timeago",function(){return function(e,n,t){if(!e)return"never";if(n||(n=Date.now()),angular.isDate(e)?e=e.getTime():"string"==typeof e&&(e=new Date(e).getTime()),angular.isDate(n)?n=n.getTime():"string"==typeof n&&(n=new Date(n).getTime()),"number"==typeof e&&"number"==typeof n){var o=Math.abs((n-e)/1e3),a=[],r=60,s=3600,i=86400,c=604800,u=31556926,l=315569260;return a=r>=o?["",t?"now":"less than a minute"]:60*r>o?[Math.round(Math.abs(o/r)),"min"]:24*s>o?[Math.round(Math.abs(o/s)),"hr"]:7*i>o?[Math.round(Math.abs(o/i)),"day"]:52*c>o?[Math.round(Math.abs(o/c)),"week"]:10*u>o?[Math.round(Math.abs(o/u)),"year"]:100*l>o?[Math.round(Math.abs(o/l)),"decade"]:["","a long time"],a[1]+=0===a[0]||a[0]>1?"s":"",a=a.join(" "),t===!0?a:n>=e?a+" ago":"in "+a}}}),angular.module("searchApp").controller("HotController",["$q","$filter","$log","$interval","$window","$location","$scope","$rootScope","socket","mainService","socketService","globals","$modal","PostService","$stateParams","HotService",function(e,n,t,o,a,r,s,i,c,u,l,g,d,f,h,p){function m(){p.getHotThisWeekFromServer().success(function(e){s.hotThisWeek=p.updateHotThisWeek(e.hotThisWeek),$()}).error(function(e){s.responseStatusHandler(e)})}function $(){s.hotThisWeek.forEach(function(e){e.theTimeAgo=n("timeago")(e.createdAt),e.postDate=moment(e.createdAt).format("ddd, MMM D, H:mm")})}s.hotThisWeek=p.getHotThisWeek(),m(),o($,12e4,0,!0),$(),i.$on("reconnect",function(){m()}),t.info("PostController booted successfully")}]),angular.module("searchApp").controller("MainController",["$q","$filter","$log","$interval","$window","$location","$scope","$rootScope","socket","mainService","socketService","globals","$modal","PostService","$document","$state","$stateParams","logoutService","cfpLoadingBar",function(e,n,t,o,a,r,s,i,c,u,l,g,d,f,h,p,m,v,S){function b(){l.getUserData().success(function(e){s.userData=g.userData(e.userData),s.clientIsRegistered="yes"==s.userData.isRegistered?!0:!1,"yes"==s.userData.isRegistered&&c.emit("joinRoom",{room:e.userData.uniqueCuid}),s.responseStatusHandler(e)}).error(function(e){s.responseStatusHandler(e)})}s.defaultDocumentTitle=function(){document.title="Negus Math - College Level Advanced Mathematics for Kenya Students"},s.changeDocumentTitle=function(e){e&&(document.title=e)},s.googleSearchModel={searchQuery:""},s.performGoogleSiteSearch=function(){s.googleSearchModel.searchQuery.length>0&&(a.location.href=r.port()?"http://"+r.host()+":"+r.port()+"/#!/search/?q="+s.googleSearchModel.searchQuery:"http://"+r.host()+"/#!/search/?q="+s.googleSearchModel.searchQuery)},i.$on("$stateChangeSuccess",function(e,n,t,o,a){s.currentState=n.name});var w=[];i.$on("$routeChangeSuccess",function(){w.push(r.$$path)}),i.back=function(){var e=w.length>1?w.splice(-2)[0]:"/";r.path(e)},s.calcObjectLength=function(e){var n=0;for(var t in e)e.hasOwnProperty(t)&&n++;return n};var T=0;s.goToTop=function(){var e=angular.element(document.getElementById("top"));h.scrollToElement(e,80,T)},s.goToUniversalBanner=function(){var e=angular.element(document.getElementById("universalBanner"));h.scrollToElement(e,80,T)},s.makeVideoIframesResponsive=function(e){var n=$("<div>"+e+"</div>"),t=$("img.ta-insert-video",n);if(t.length>0){var o=t.addClass("embed-responsive-item").wrap("<div class='embed-responsive embed-responsive-16by9'></div>");n.find("img").replaceWith(o)}return n.html()},s.universalDisable=!1,s.showBanner=!1,s.bannerClass="",s.bannerMessage="",s.showRegistrationBanner=!1,s.registrationBannerClass="",s.registrationBannerMessage="",s.showNewPostBanner=!1,s.newPostBannerClass="",s.newPostBannerMessage="",s.clearBanners=function(){s.showBanner=!1,s.showRegistrationBanner=!1,s.showNewPostBanner=!1},i.$on("$stateChangeSuccess",function(e,n,t,o,a){s.clearBanners()}),s.universalDisableTrue=function(){s.universalDisable=!0},s.universalDisableFalse=function(){s.universalDisable=!1},s.responseStatusHandler=function(e){e&&(e.redirect&&e.redirect&&(a.location.href=e.redirectPage),e.disable&&e.disable&&s.universalDisableTrue(),e.notify&&e.type&&e.msg&&s.showToast(e.type,e.msg),e.banner&&e.bannerClass&&e.msg&&(s.showBanner=!0,s.bannerClass=e.bannerClass,s.bannerMessage=e.msg),e.newPostBanner&&e.bannerClass&&e.msg&&(s.showNewPostBanner=!0,s.newPostBannerClass=e.bannerClass,s.newPostBannerMessage=e.msg),e.registrationBanner&&e.bannerClass&&e.msg&&(s.showRegistrationBanner=!0,s.registrationBannerClass=e.bannerClass,s.registrationBannerMessage=e.msg),e.reason&&t.warn(e.reason))},i.$on("responseStatusHandler",function(e,n){s.responseStatusHandler(n)}),s.isLoading=!1,s.isLoadingPercentage=0,s.changeIsLoadingPercentage=function(e){s.isLoadingPercentage=e},s.showHideLoadingBanner=function(e){s.showHideLoadingBanner=function(e){e?($("#loading-splash-card").removeClass("hidden"),$(".hideMobileLoading").addClass("hidden-xs hidden-sm")):($("#loading-splash-card").addClass("hidden"),$(".hideMobileLoading").removeClass("hidden-xs hidden-sm"))}},i.$on("cfpLoadingBar:loading",function(e,n){s.isLoadingPercentage=100*S.status()}),i.$on("cfpLoadingBar:loaded",function(e,n){s.isLoadingPercentage=100*S.status()}),i.$on("cfpLoadingBar:completed",function(e,n){s.isLoadingPercentage=100*S.status()}),s.isLoadingTrue=function(){s.isLoading=!0},s.isLoadingFalse=function(){s.isLoading=!1},i.$on("isLoadingTrue",function(){s.isLoading=!0}),i.$on("isLoadingFalse",function(){s.isLoading=!1}),s.showToast=function(e,n){switch(e){case"success":toastr.clear(),toastr.success(n);break;case"warning":toastr.clear(),toastr.warning(n,"Warning",{closeButton:!0,tapToDismiss:!0});break;case"error":toastr.clear(),toastr.error(n,"Error",{closeButton:!0,tapToDismiss:!0,timeOut:!1});break;default:toastr.clear()}},i.$on("showToast",function(e,n){var t=n.toastType,o=n.text;s.showToast(t,o)}),s.currentTime="",s.currentTime=moment().format("ddd, MMM D, H:mm");var M=function(){s.currentTime=moment().format("ddd, MMM D, H:mm")};o(M,2e4,0,!0),c.on("joined",function(){console.log("JOIN SUCCESS")}),b(),s.goToLandingPage=function(){a.location.href="index"},s.logoutClient=function(){v.logoutClient().success(function(e){s.responseStatusHandler(e)}).error(function(e){s.responseStatusHandler(e)})},i.$on("reconnect",function(){}),t.info("MainController booted successfully")}]),angular.module("searchApp").factory("globals",["$q","$window","$rootScope","socketService",function(e,n,t,o){var a={};return{userData:function(e){return e?a=e:a}}}]),angular.module("searchApp").factory("HotService",["$log","$http","$window","$rootScope","socket","socketService","globals",function(e,n,t,o,a,r,s){var i=[];return a.on("hotThisWeekPosts",function(e){o.$broadcast("hotThisWeekPosts",e)}),{getHotThisWeek:function(){return i},getHotThisWeekFromServer:function(){return n.post("/api/getHotThisWeek",{})},updateHotThisWeek:function(e){return i=e,e}}}]),angular.module("searchApp").factory("mainService",["$log","$window","$rootScope","socket","socketService","globals",function(e,n,t,o,a,r){return o.on("reconnect",function(){e.info("'reconnect sequence' triggered"),t.$broadcast("reconnect")}),{done:function(){return 1}}}]),angular.module("searchApp").factory("PostService",["$log","$http","$window","$rootScope","socket","socketService","globals",function(e,n,t,o,a,r,s,i){var c=[],u=0;return a.on("newPost",function(e){o.$broadcast("newPost",e)}),a.on("postUpdate",function(e){o.$broadcast("postUpdate",e)}),{getCurrentPosts:function(){return c},getCurrentPostsCount:function(){return u},getPostsFromServer:function(e){return n.post("/api/getPosts",{page:e})},getSuggestedPostsFromServer:function(){return n.post("/api/getSuggestedPosts",{})},updatePosts:function(e){return c=e,e},getPostFromServer:function(e){return n.post("/api/getPost",{postIndex:e})}}}]),angular.module("searchApp").factory("socket",["$log","$location","$rootScope",function(e,n,t){var o;o=n.port()?n.host()+":"+n.port():n.host();var a=io.connect(o);return{on:function(e,n){a.on(e,function(){var e=arguments;t.$apply(function(){n.apply(a,e)})})},emit:function(e,n,o){a.emit(e,n,function(){var e=arguments;t.$apply(function(){o&&o.apply(a,e)})})},removeAllListeners:function(e,n){a.removeAllListeners(e,function(){var e=arguments;t.$apply(function(){n.apply(a,e)})})}}}]).factory("socketService",["$log","$http","$rootScope",function(e,n,t){return{getUserData:function(){return n.get("/api/getUserData")},sendContactUs:function(e){return n.post("/contactUs",e)}}}]).factory("logoutService",["$http",function(e){return{logoutClient:function(){return e.post("/api/logoutClient")}}}]);
//# sourceMappingURL=concatenated.min.js.map