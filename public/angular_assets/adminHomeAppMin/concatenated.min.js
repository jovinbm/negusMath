angular.module("adminHomeApp",["ui.bootstrap","angular-loading-bar","cfp.loadingBar","angulartics","angulartics.google.analytics","angularMoment","ui.router","duScroll","ngFx","ngAnimate","textAngular","ngSanitize","angularUtils.directives.dirDisqus","ngTagsInput","ui.utils"]).run(["$templateCache","$http","$rootScope","$state","$stateParams",function(e,t,s,o,n){s.$state=o,s.$stateParams=n,t.get("views/admin/partials/views/post_stream.html",{cache:e}),t.get("views/admin/partials/views/full_post.html",{cache:e}),t.get("views/search/search_results.html",{cache:e})}]).config(["$stateProvider","$urlRouterProvider","$locationProvider",function(e,t,s){t.otherwise("/home/1"),e.state("home",{url:"/home/:pageNumber",templateUrl:"views/admin/partials/views/post_stream.html"}).state("post",{url:"/post/:postIndex",templateUrl:"views/admin/partials/views/full_post.html"}).state("search",{url:"/search/:queryString/:page",templateUrl:"views/search/search_results.html"}).state("otherwise",{url:"/home/1"}),s.html5Mode(!1).hashPrefix("!")}]),angular.module("adminHomeApp").filter("timeago",function(){return function(e,t,s){if(!e)return"never";if(t||(t=Date.now()),angular.isDate(e)?e=e.getTime():"string"==typeof e&&(e=new Date(e).getTime()),angular.isDate(t)?t=t.getTime():"string"==typeof t&&(t=new Date(t).getTime()),"number"==typeof e&&"number"==typeof t){var o=Math.abs((t-e)/1e3),n=[],a=60,r=3600,i=86400,u=604800,c=31556926,g=315569260;return n=a>=o?["",s?"now":"less than a minute"]:60*a>o?[Math.round(Math.abs(o/a)),"min"]:24*r>o?[Math.round(Math.abs(o/r)),"hr"]:7*i>o?[Math.round(Math.abs(o/i)),"day"]:52*u>o?[Math.round(Math.abs(o/u)),"week"]:10*c>o?[Math.round(Math.abs(o/c)),"year"]:100*g>o?[Math.round(Math.abs(o/g)),"decade"]:["","a long time"],n[1]+=0===n[0]||n[0]>1?"s":"",n=n.join(" "),s===!0?n:t>=e?n+" ago":"in "+n}}}),angular.module("adminHomeApp").controller("HotController",["$q","$filter","$log","$interval","$window","$location","$scope","$rootScope","socket","mainService","socketService","globals","$modal","PostService","$stateParams","HotService",function(e,t,s,o,n,a,r,i,u,c,g,l,d,h,m,p){function f(){p.getHotThisWeekFromServer().success(function(e){r.hotThisWeek=p.updateHotThisWeek(e.hotThisWeek),S()}).error(function(e){r.responseStatusHandler(e)})}function S(){r.hotThisWeek.forEach(function(e){e.theTimeAgo=t("timeago")(e.createdAt),e.postDate=moment(e.createdAt).format("ddd, MMM D, H:mm")})}r.hotThisWeek=p.getHotThisWeek(),f(),o(S,12e4,0,!0),S(),i.$on("reconnect",function(){f()}),s.info("HotController booted successfully")}]),angular.module("adminHomeApp").controller("MainController",["$q","$filter","$log","$interval","$window","$location","$scope","$rootScope","socket","mainService","socketService","globals","$modal","logoutService","PostService","$document","$state","$stateParams","cfpLoadingBar",function(e,t,s,o,n,a,r,i,u,c,g,l,d,h,m,p,f,S,P){r.defaultDocumentTitle=function(){document.title="Negus Math - College Level Advanced Mathematics for Kenya Students"},r.changeDocumentTitle=function(e){e&&(document.title=e)},r.showDisqus=-1!==a.host().search("negusmath"),r.refillHighLightText=function(){"search"==i.$state.current.name&&i.$stateParams.queryString&&(r.highlightText=i.$stateParams.queryString?i.$stateParams.queryString:r.highlightText)},r.refillHighLightText(),r.highlightThisText=function(e){var t=$("<div>"+e+"</div>");return $(t).highlight(r.highlightText),t.html()},r.removeHighLightText=function(e){r.highlightText="";var t=$("<div>"+e+"</div>");return $(t).removeHighlight(),t.html()},r.highLightPost=function(e){r.highLightReference()&&(e.authorName&&(e.authorName=r.highlightThisText(e.authorName)),e.postHeading&&(e.postHeading=r.highlightThisText(e.postHeading)),e.postContent&&(e.postContent=r.highlightThisText(e.postContent)),e.postSummary&&(e.postSummary=r.highlightThisText(e.postSummary)),e.postTags&&e.postTags.forEach(function(e){e.text=r.highlightThisText(e.text)}))},r.removePostHighlights=function(e){e.authorName&&(e.authorName=r.removeHighLightText(e.authorName)),e.postHeading&&(e.postHeading=r.removeHighLightText(e.postHeading)),e.postContent&&(e.postContent=r.removeHighLightText(e.postContent)),e.postSummary&&(e.postSummary=r.removeHighLightText(e.postSummary)),e.postTags&&e.postTags.forEach(function(e){e.text=r.removeHighLightText(e.text)})},r.stateChangeCounter=0,r.highLightReference=function(){var e=i.$stateParams.queryString?i.$stateParams.queryString:r.highlightText;return e&&e.length>3?"search"==i.$state.current.name?(r.stateChangeCounter=0,r.highlightText=i.$stateParams.queryString,!0):r.stateChangeCounter>0?(r.stateChangeCounter++,!1):(r.stateChangeCounter++,!0):!1},i.$on("$stateChangeStart",function(e,t,s,o,n){r.clearBanners(),r.clearToasts()}),i.$on("$stateChangeSuccess",function(e,t,s,o,n){r.currentState=t.name});var w=[];i.$on("$routeChangeSuccess",function(){w.push(a.$$path)}),i.back=function(){var e=w.length>1?w.splice(-2)[0]:"/";a.path(e)},r.calcObjectLength=function(e){var t=0;for(var s in e)e.hasOwnProperty(s)&&t++;return t};var v=0;r.goToTop=function(){var e=angular.element(document.getElementById("top"));p.scrollToElement(e,80,v)},r.goToUniversalBanner=function(){var e=angular.element(document.getElementById("universalBanner"));p.scrollToElement(e,80,v)},r.makeVideoIframesResponsive=function(e){var t=$("<div>"+e+"</div>"),s=$("img.ta-insert-video",t);if(s.length>0){var o=s.addClass("embed-responsive-item").wrap("<div class='embed-responsive embed-responsive-16by9'></div>");t.find("img").replaceWith(o)}return t.html()},r.clientIsRegistered=!1,r.universalDisable=!1,r.showBanner=!1,r.bannerClass="",r.bannerMessage="",r.showRegistrationBanner=!1,r.registrationBannerClass="",r.registrationBannerMessage="",r.showNewPostBanner=!1,r.newPostBannerClass="",r.newPostBannerMessage="",r.clearBanners=function(){r.showBanner=!1,r.showRegistrationBanner=!1,r.showNewPostBanner=!1},r.universalDisableTrue=function(){r.universalDisable=!0},r.universalDisableFalse=function(){r.universalDisable=!1},r.responseStatusHandler=function(e){e&&(e.redirect&&e.redirect&&(n.location.href=e.redirectPage),e.disable&&e.disable&&r.universalDisableTrue(),e.notify&&e.type&&e.msg&&r.showToast(e.type,e.msg),e.banner&&e.bannerClass&&e.msg&&(r.showBanner=!0,r.bannerClass=e.bannerClass,r.bannerMessage=e.msg),e.newPostBanner&&e.bannerClass&&e.msg&&(r.showNewPostBanner=!0,r.newPostBannerClass=e.bannerClass,r.newPostBannerMessage=e.msg),e.registrationBanner&&e.bannerClass&&e.msg&&(r.showRegistrationBanner=!0,r.registrationBannerClass=e.bannerClass,r.registrationBannerMessage=e.msg),e.reason&&s.warn(e.reason))},i.$on("responseStatusHandler",function(e,t){r.responseStatusHandler(t)}),r.isLoading=!1,r.isLoadingPercentage=0,r.changeIsLoadingPercentage=function(e){r.isLoadingPercentage=e},r.showHideLoadingBanner=function(e){e?($("#loading-splash-card").removeClass("hidden"),$(".hideMobileLoading").addClass("hidden-xs hidden-sm")):($("#loading-splash-card").addClass("hidden"),$(".hideMobileLoading").removeClass("hidden-xs hidden-sm"))},i.$on("cfpLoadingBar:loading",function(e,t){r.isLoadingPercentage=100*P.status()}),i.$on("cfpLoadingBar:loaded",function(e,t){r.isLoadingPercentage=100*P.status()}),i.$on("cfpLoadingBar:completed",function(e,t){r.isLoadingPercentage=100*P.status()}),r.isLoadingTrue=function(){r.isLoading=!0},r.isLoadingFalse=function(){r.isLoading=!1},i.$on("isLoadingTrue",function(){r.isLoading=!0}),i.$on("isLoadingFalse",function(){r.isLoading=!1}),r.clearToasts=function(){toastr.clear()},r.showToast=function(e,t){switch(e){case"success":toastr.clear(),toastr.success(t);break;case"warning":toastr.clear(),toastr.warning(t,"Warning",{closeButton:!0,tapToDismiss:!0});break;case"error":toastr.clear(),toastr.error(t,"Error",{closeButton:!0,tapToDismiss:!0,timeOut:!1});break;default:toastr.clear()}},i.$on("showToast",function(e,t){var s=t.toastType,o=t.text;r.showToast(s,o)}),r.currentTime="",r.currentTime=moment().format("ddd, MMM D, H:mm");var y=function(){r.currentTime=moment().format("ddd, MMM D, H:mm")};o(y,2e4,0,!0),g.getUserData().success(function(e){r.userData=l.userData(e.userData),"yes"==r.userData.isRegistered&&(r.clientIsRegistered=!0),u.emit("joinRoom",{room:e.userData.uniqueCuid}),r.responseStatusHandler(e)}).error(function(e){r.responseStatusHandler(e)}),u.on("joined",function(){console.log("JOIN SUCCESS")}),r.mainSearchModel={queryString:"",postSearchUniqueCuid:"",requestedPage:1},r.fillSearchBox=function(){r.mainSearchModel.queryString="search"==i.$state.current.name&&i.$stateParams.queryString?i.$stateParams.queryString?i.$stateParams.queryString:r.highlightText:""},r.fillSearchBox(),r.performMainSearch=function(){r.mainSearchModel.queryString.length>0&&(n.location.href=a.port()?"http://"+a.host()+":"+a.port()+"/#!/search/"+r.mainSearchModel.queryString+"/1":"http://"+a.host()+"/#!/search/"+r.mainSearchModel.queryString+"/1")},r.newPost=!1,r.showNewPost=function(){r.newPost=!0},r.hideNewPost=function(){r.newPost=!1},r.newPostModel={postHeading:"",postContent:"",postSummary:"",postTags:[]},r.postHeadingIsLessMin=!0,r.postContentIsEmpty=!0,r.postSummaryIsEmpty=!0,r.postSummaryHasExceededMaximum=!1,r.checkIfPostHeadingLessMin=function(){var e=r.newPostModel.postHeading;return r.postHeadingIsLessMin=e.length<10?!0:!1,r.postHeadingIsLessMin},r.checkIfPostContentIsEmpty=function(){var e=$("<div>"+r.newPostModel.postContent+"</div>").text();return r.postContentIsEmpty=0==e.length?!0:!1,r.postContentIsEmpty},r.checkIfPostSummaryIsEmpty=function(){var e=$("<div>"+r.newPostModel.postSummary+"</div>").text();return r.postSummaryIsEmpty=0==e.length?!0:!1,r.postSummaryIsEmpty},r.checkPostSummaryMaxLength=function(e){var t=$("<div>"+r.newPostModel.postSummary+"</div>").text();return r.postSummaryHasExceededMaximum=t.length>e?!0:!1,r.postSummaryHasExceededMaximum},r.checkEditPostTags=function(){var e=0,t=0;return r.newPostModel.postTags.forEach(function(s){t++,0==e&&(s.text.length<3&&0==e&&(e++,r.showToast("warning","Minimum required length for each tag is 3 characters")),s.text.length>30&&0==e&&(e++,r.showToast("warning","Maximum allowed length for each tag is 30 characters")))}),t>5&&0==e&&(e++,r.showToast("warning","Only a maximum of 5 tags are allowed per post")),0==e?!0:!1},r.submitNewPost=function(){var e=0;if(r.checkIfPostHeadingLessMin()&&0==e&&(e++,r.showToast("warning","The minimum required length of the heading is 10 characters")),r.checkIfPostContentIsEmpty()&&0==e&&(e++,r.showToast("warning","Please add some text to the post first")),r.checkIfPostSummaryIsEmpty()&&0==e&&(e++,r.showToast("warning","The post summary cannot be empty")),r.checkPostSummaryMaxLength()&&0==e&&(e++,r.showToast("warning","The post summary cannot exceed 2000 characters")),r.checkEditPostTags()||0!=e||e++,0==e){var t={postHeading:r.newPostModel.postHeading,postContent:r.newPostModel.postContent,postSummary:r.newPostModel.postSummary,postTags:r.newPostModel.postTags};m.submitNewPost(t).success(function(e){r.hideNewPost(),r.responseStatusHandler(e),r.newPostModel.postHeading="",r.newPostModel.postContent="",r.newPostModel.postSummary=""}).error(function(e){r.responseStatusHandler(e)})}},r.logoutClient=function(){h.logoutClient().success(function(e){r.responseStatusHandler(e)}).error(function(e){r.responseStatusHandler(e)})},i.$on("reconnect",function(){}),s.info("MainController booted successfully")}]),angular.module("adminHomeApp").controller("PostsController",["$q","$filter","$log","$interval","$window","$location","$scope","$rootScope","socket","mainService","socketService","globals","$modal","PostService","$stateParams",function(e,t,s,o,n,a,r,i,u,c,g,l,d,h,m){function p(){r.posts.forEach(function(e){e.postSummary=r.makeVideoIframesResponsive(e.postSummary)})}function f(){r.showHideLoadingBanner(!0),r.suggestedPosts=[],h.getSuggestedPostsFromServer().success(function(e){function t(){r.suggestedPosts.forEach(function(e){e.postSummary=r.makeVideoIframesResponsive(e.postSummary)})}e.postsArray.length>0?(r.showSuggestedPostsOnly(),r.suggestedPosts=e.postsArray,P(),t()):(r.suggestedPosts=[],r.showSuggestedPosts=!1,r.goToUniversalBanner(),r.showHideLoadingBanner(!1))}).error(function(e){r.goToUniversalBanner(),r.suggestedPosts=[],r.showSuggestedPosts=!1,r.responseStatusHandler(e)})}function S(){r.showHideLoadingBanner(!0),h.getPostsFromServer(m.pageNumber).success(function(e){if(0==e.postsArray.length){r.posts=[];var t={banner:!0,bannerClass:"alert alert-dismissible alert-success",msg:"No more posts to show"};r.responseStatusHandler(t),r.mainSearchResultsPosts=!1,f(),r.goToUniversalBanner()}else r.posts=h.updatePosts(e.postsArray),r.showThePostsOnly(),P(),e.postCount&&(r.postsCount=e.postsCount),p()}).error(function(e){r.responseStatusHandler(e),r.posts=[],r.mainSearchResultsPosts=!1,f()})}function P(){r.posts.forEach(function(e){e.theTimeAgo=t("timeago")(e.createdAt),e.postDate=moment(e.createdAt).format("ddd, MMM D, H:mm")})}r.defaultDocumentTitle(),r.posts=h.getCurrentPosts(),r.postsCount=h.getCurrentPostsCount(),r.suggestedPosts=[],r.mainSearchResultsPosts=!1,r.showSuggestedPosts=!1,r.showThePostsOnly=function(){r.showHideLoadingBanner(!1),r.mainSearchResultsPosts=!0,r.showSuggestedPosts=!1},r.showSuggestedPostsOnly=function(){r.showHideLoadingBanner(!1),r.mainSearchResultsPosts=!1,r.showSuggestedPosts=!0},S(),r.checkIfPostsIsEmpty=function(){return 0==r.posts.length},o(P,12e4,0,!0),P(),i.$on("newPost",function(e,t){1==m.pageNumber&&(r.posts.unshift(t.post),P(),p()),t.postCount&&(r.postCount=t.postCount)}),i.$on("reconnect",function(){"home"==r.currentState&&S()}),s.info("PostController booted successfully")}]).controller("FullPostController",["$q","$filter","$log","$interval","$window","$location","$scope","$rootScope","socket","mainService","socketService","globals","$modal","PostService","$stateParams",function(e,t,s,o,n,a,r,i,u,c,g,l,d,h,m){function p(){r.showHideLoadingBanner(!0),r.suggestedPosts=[],h.getSuggestedPostsFromServer().success(function(e){function t(){r.suggestedPosts.forEach(function(e){e.postSummary=r.makeVideoIframesResponsive(e.postSummary)})}e.postsArray.length>0?(r.showSuggestedPostsOnly(),r.suggestedPosts=e.postsArray,S(),t()):(r.suggestedPosts=[],r.showSuggestedPosts=!1,r.goToUniversalBanner(),r.showHideLoadingBanner(!1))}).error(function(e){r.goToUniversalBanner(),r.suggestedPosts=[],r.showSuggestedPosts=!1,r.responseStatusHandler(e)})}function f(){r.showHideLoadingBanner(!0),h.getPostFromServer(r.postIndex).success(function(e){function t(){r.post.postContent=r.makeVideoIframesResponsive(r.post.postContent)}r.post=e.thePost,r.responseStatusHandler(e),0!=r.calcObjectLength(r.post)?(r.changeDocumentTitle(r.post.postHeading),r.showThePostOnly(),S(),P(),t(),r.highLightPost(r.post),r.showDisqus&&(r.postIsLoaded=!0)):(r.post={},r.showPost=!1,p(),r.goToUniversalBanner())}).error(function(e){r.responseStatusHandler(e),r.post={},r.showPost=!1,p()})}function S(){r.post&&(r.post.theTimeAgo=t("timeago")(r.post.createdAt),r.post.postDate=moment(r.post.createdAt).format("ddd, MMM D, H:mm")),r.suggestedPosts&&r.suggestedPosts.forEach(function(e){e.theTimeAgo=t("timeago")(e.createdAt),e.postDate=moment(e.createdAt).format("ddd, MMM D, H:mm")})}function P(){r.post.postUrl="http://www.negusmath.com/#!/post/"+r.post.postIndex}r.postIndex=m.postIndex,r.post={},r.suggestedPosts=[],r.showPost=!1,r.showSuggestedPosts=!1,r.showThePostOnly=function(){r.showHideLoadingBanner(!1),r.showPost=!0,r.showSuggestedPosts=!1},r.showSuggestedPostsOnly=function(){r.showHideLoadingBanner(!1),r.showPost=!1,r.showSuggestedPosts=!0},r.postIsLoaded=!1,f(),o(S,12e4,0,!0),r.editingMode=!1,r.postBackup=r.post,r.goIntoPostEditingMode=function(){r.postBackup=r.post,r.editingMode=!0},r.goIntoFullPostViewMode=function(){r.editingMode=!1},r.editPostHeadingLessMin=!1,r.editPostContentIsEmpty=!0,r.editPostSummaryIsEmpty=!0,r.editPostSummaryHasExceededMaximum=!1,r.checkIfEditPostHeadingLessMin=function(){if(r.post.postHeading){var e=r.post.postHeading;return r.editPostHeadingLessMin=e.length<10?!0:!1,r.editPostHeadingLessMin}return!0},r.checkIfEditPostContentIsEmpty=function(){if(r.post.postContent){var e=$("<div>"+r.post.postContent+"</div>").text();return r.editPostContentIsEmpty=0==e.length?!0:!1,r.editPostContentIsEmpty}return!0},r.checkIfEditPostSummaryIsEmpty=function(){if(r.post.postSummary){var e=$("<div>"+r.post.postSummary+"</div>").text();return r.editPostSummaryIsEmpty=0==e.length?!0:!1,r.editPostSummaryIsEmpty}return!0},r.checkEditPostSummaryMaxLength=function(e){if(r.post.postSummary){var t=$("<div>"+r.post.postSummary+"</div>").text();return r.editPostSummaryHasExceededMaximum=t.length>e?!0:!1,r.editPostSummaryHasExceededMaximum}return!0},r.checkEditPostTags=function(){var e=0,t=0;return r.post.postTags.forEach(function(s){t++,0==e&&(s.text.length<3&&0==e&&(e++,r.showToast("warning","Minimum allowed length for each tag is 3 characters")),s.text.length>30&&0==e&&(e++,r.showToast("warning","Maximum allowed length for each tag is 30 characters")))}),t>5&&0==e&&(e++,r.showToast("warning","Only a maximum of 5 tags are allowed per post")),0==e?!0:!1},r.submitPostUpdate=function(){var e=0;r.checkIfEditPostHeadingLessMin()&&0==e&&(e++,r.showToast("warning","The minimum required length of the heading is 10 characters")),r.checkIfEditPostContentIsEmpty()&&0==e&&(e++,r.showToast("warning","Please add some text to the post first")),r.checkIfEditPostSummaryIsEmpty()&&0==e&&(e++,r.showToast("warning","The post summary cannot be empty")),r.checkEditPostSummaryMaxLength()&&0==e&&(e++,r.showToast("warning","The post summary cannot exceed 2000 characters")),r.checkEditPostTags()||0!=e||e++,0==e&&h.submitPostUpdate(r.post).success(function(e){r.goIntoFullPostViewMode(),r.responseStatusHandler(e)}).error(function(e){r.responseStatusHandler(e)})},r.cancelPostUpdate=function(){r.post=r.postBackup,r.goIntoFullPostViewMode(),r.showToast("success","Update cancelled")},i.$on("postUpdate",function(e,t){r.post=t.post,S()}),i.$on("reconnect",function(){r.editingMode||"post"==r.currentState&&f()}),s.info("FullPostController booted successfully")}]),angular.module("adminHomeApp").controller("SearchController",["$q","$filter","$log","$interval","$window","$location","$scope","$rootScope","socket","mainService","socketService","globals","$modal","PostService","$stateParams",function(e,t,s,o,n,a,r,i,u,c,g,l,d,h,m){function p(){r.mainSearchResultsPosts.forEach(function(e){e.postSummary=r.makeVideoIframesResponsive(e.postSummary)})}function f(){r.showHideLoadingBanner(!0),r.suggestedPosts=[],h.getSuggestedPostsFromServer().success(function(e){function t(){r.suggestedPosts.forEach(function(e){e.postSummary=r.makeVideoIframesResponsive(e.postSummary)})}e.postsArray.length>0?(r.showSuggestedPostsOnly(),r.suggestedPosts=e.postsArray,P(),t()):(r.suggestedPosts=[],r.showSuggestedPosts=!1,r.goToUniversalBanner(),r.showHideLoadingBanner(!1))}).error(function(e){r.goToUniversalBanner(),r.showHideLoadingBanner(!1),r.suggestedPosts=[],r.showSuggestedPosts=!1,r.responseStatusHandler(e)})}function S(){r.showHideLoadingBanner(!0),h.mainSearch(r.mainSearchModel).success(function(e){var t=e.results;if(h.updateMainSearchResults(t),r.mainSearchResultsCount=t.totalResults,r.changeCurrentPage(t.page),r.mainSearchModel.postSearchUniqueCuid=t.searchUniqueCuid,t.totalResults>0){r.mainSearchResultsPosts=t.postsArray,r.showMainSearchResultsOnly(),P(),p(),r.mainSearchResultsPosts.forEach(function(e){r.highLightPost(e)});var s={banner:!0,bannerClass:"alert alert-dismissible alert-success",msg:"The search returned "+r.mainSearchResultsCount+" results"};r.responseStatusHandler(s)}else{r.mainSearchResultsPosts=[];var o={banner:!0,bannerClass:"alert alert-dismissible alert-success",msg:"The search returned 0 results"};r.responseStatusHandler(o),r.showMainSearchResults=!1,f(),r.goToUniversalBanner()}}).error(function(e){r.responseStatusHandler(e),r.mainSearchResultsPosts=[],r.showMainSearchResults=!1,f()})}function P(){r.mainSearchResultsPosts.forEach(function(e){e.theTimeAgo=t("timeago")(e.createdAt),e.postDate=moment(e.createdAt).format("ddd, MMM D, H:mm")})}r.changeDocumentTitle(m.queryString+" - NegusMath Search"),r.mainSearchResultsPosts=h.getCurrentPosts(),r.mainSearchResultsCount=0,r.currentPage=m.page,r.changeCurrentPage=function(e){e!=r.currentPage},r.suggestedPosts=[],r.showMainSearchResults=!1,r.showSuggestedPosts=!1,r.showMainSearchResultsOnly=function(){r.showHideLoadingBanner(!1),r.showMainSearchResults=!0,r.showSuggestedPosts=!1},r.showSuggestedPostsOnly=function(){r.showHideLoadingBanner(!1),r.showMainSearchResults=!1,r.showSuggestedPosts=!0},r.mainSearchModel={queryString:m.queryString,postSearchUniqueCuid:"",requestedPage:r.currentPage},S(),r.checkIfPostsSearchResultsIsEmpty=function(){return 0==r.mainSearchResultsPosts.length},o(P,12e4,0,!0),P(),i.$on("reconnect",function(){"search"==r.currentState&&S()}),s.info("SearchController booted successfully")}]),angular.module("adminHomeApp").factory("globals",["$q","$window","$rootScope","socketService",function(e,t,s,o){var n={};return{userData:function(e){return e?n=e:n}}}]),angular.module("adminHomeApp").factory("HotService",["$log","$http","$window","$rootScope","socket","socketService","globals",function(e,t,s,o,n,a,r){var i=[];return n.on("hotThisWeekPosts",function(e){o.$broadcast("hotThisWeekPosts",e)}),{getHotThisWeek:function(){return i},getHotThisWeekFromServer:function(){return t.post("/api/getHotThisWeek",{})},updateHotThisWeek:function(e){return i=e,e}}}]),angular.module("adminHomeApp").factory("mainService",["$log","$window","$rootScope","socket","socketService","globals",function(e,t,s,o,n,a){return o.on("reconnect",function(){e.info("'reconnect sequence' triggered"),s.$broadcast("reconnect")}),{done:function(){return 1}}}]),angular.module("adminHomeApp").factory("PostService",["$log","$http","$window","$rootScope","socket","socketService","globals",function(e,t,s,o,n,a,r,i){var u=[],c=0,g=[];return n.on("newPost",function(e){o.$broadcast("newPost",e)}),n.on("postUpdate",function(e){o.$broadcast("postUpdate",e)}),{getCurrentPosts:function(){return u},getCurrentPostsCount:function(){return c},getPostsFromServer:function(e){return t.post("/api/getPosts",{page:e})},getSuggestedPostsFromServer:function(){return t.post("/api/getSuggestedPosts",{})},updatePosts:function(e){return u=e,e},getPostFromServer:function(e){return t.post("/api/getPost",{postIndex:e})},submitNewPost:function(e){return t.post("/api/newPost",{newPost:e})},submitPostUpdate:function(e){return t.post("/api/updatePost",{postUpdate:e})},getCurrentMainSearchResults:function(){return g},updateMainSearchResults:function(e){return g=e},mainSearch:function(e){return t.post("/api/mainSearch",e)}}}]),angular.module("adminHomeApp").factory("socket",["$log","$location","$rootScope",function(e,t,s){var o;o=t.port()?t.host()+":"+t.port():t.host();var n=io.connect(o);return{on:function(e,t){n.on(e,function(){var e=arguments;s.$apply(function(){t.apply(n,e)})})},emit:function(e,t,o){n.emit(e,t,function(){var e=arguments;s.$apply(function(){o&&o.apply(n,e)})})},removeAllListeners:function(e,t){n.removeAllListeners(e,function(){var e=arguments;s.$apply(function(){t.apply(n,e)})})}}}]).factory("socketService",["$log","$http","$rootScope",function(e,t,s){return{getUserData:function(){return t.get("/api/getUserData")},sendContactUs:function(e){return t.post("/contactUs",e)}}}]).factory("logoutService",["$http",function(e){return{logoutClient:function(){return e.post("/api/logoutClient")}}}]);
//# sourceMappingURL=concatenated.min.js.map