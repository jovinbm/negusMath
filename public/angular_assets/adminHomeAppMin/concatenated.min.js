angular.module("adminHomeApp",["ui.bootstrap","cfp.loadingBar","angulartics","angulartics.google.analytics","angularMoment","ui.router","duScroll","ngFx","ngAnimate","textAngular","ngSanitize","angularUtils.directives.dirDisqus","ngTagsInput","ui.utils"]).run(["$templateCache","$http","$rootScope","$state","$stateParams",function(e,t,o,n,s){o.$state=n,o.$stateParams=s,t.get("views/admin/partials/views/post_stream.html",{cache:e}),t.get("views/admin/partials/views/full_post.html",{cache:e}),t.get("views/search/search_results.html",{cache:e})}]).config(["$stateProvider","$urlRouterProvider","$locationProvider",function(e,t,o){t.when("/home","/home/1").when("/home/","/home/1").when("/search","/home/1").otherwise("/home/1"),e.state("home",{url:"/home/:pageNumber",templateUrl:"views/admin/partials/views/post_stream.html"}).state("post",{url:"/post/:postIndex",templateUrl:"views/admin/partials/views/full_post.html"}).state("search",{url:"/search/:queryString/:pageNumber",templateUrl:"views/search/search_results.html"}).state("otherwise",{url:"/home/1"}),o.html5Mode(!1).hashPrefix("!")}]),angular.module("adminHomeApp").directive("universalBanner",["$rootScope",function(e){return{templateUrl:"views/admin/partials/smalls/universal_banner.html",restrict:"AE",link:function(t,o,n){t.universalBanner={show:!1,bannerClass:"",msg:""},e.$on("universalBanner",function(e,o){t.universalBanner=o}),e.$on("clearBanners",function(){t.universalBanner={show:!1,bannerClass:"",msg:""}})}}}]).directive("newPostBanner",["$rootScope",function(e){return{templateUrl:"views/admin/partials/smalls/new_post_banner.html",restrict:"AE",link:function(t,o,n){t.newPostBanner={show:!1,bannerClass:"",msg:""},e.$on("newPostBanner",function(e,o){t.newPostBanner=o}),e.$on("clearBanners",function(){t.newPostBanner={show:!1,bannerClass:"",msg:""}})}}}]).directive("toastrDirective",["$rootScope",function(e){return{restrict:"AE",link:function(t,o,n){e.showToast=function(e,t){switch(e){case"success":toastr.clear(),toastr.success(t);break;case"warning":toastr.clear(),toastr.warning(t,"Warning",{closeButton:!0,tapToDismiss:!0});break;case"error":toastr.clear(),toastr.error(t,"Error",{closeButton:!0,tapToDismiss:!0,timeOut:!1});break;default:toastr.clear()}},e.clearToasts=function(){toastr.clear()}}}}]).directive("loadingBanner",["$rootScope",function(e){var t=["$scope","$rootScope","cfpLoadingBar",function(e,t,o){t.isLoading=!1,t.isLoadingPercentage=0,t.changeIsLoadingPercentage=function(e){t.isLoadingPercentage=e},t.showHideLoadingBanner=function(e){e?($("#loading-splash-card").removeClass("hidden"),$(".hideMobileLoading").addClass("hidden-xs hidden-sm")):($("#loading-splash-card").addClass("hidden"),$(".hideMobileLoading").removeClass("hidden-xs hidden-sm"))},t.$on("cfpLoadingBar:loading",function(e,n){t.isLoadingPercentage=100*o.status()}),t.$on("cfpLoadingBar:loaded",function(e,n){t.isLoadingPercentage=100*o.status()}),t.$on("cfpLoadingBar:completed",function(e,n){t.isLoadingPercentage=100*o.status()}),t.isLoadingTrue=function(){t.isLoading=!0},t.isLoadingFalse=function(){t.isLoading=!1},t.$on("isLoadingTrue",function(){t.isLoading=!0}),t.$on("isLoadingFalse",function(){t.isLoading=!1})}];return{templateUrl:"views/admin/partials/smalls/loading_banner.html",restrict:"AE",controller:t}}]),angular.module("adminHomeApp").directive("titleDirective",["globals",function(e){return{template:'<title ng-bind="defaultTitle"></title>',restrict:"AE",link:function(t,o,n){t.defaultTitle=e.getDocumentTitle(),t.$watch(e.getDocumentTitle,function(){t.defaultTitle=e.getDocumentTitle()})}}}]).directive("universalSearchBox",["$window","$location","$rootScope","globals",function(e,t,o,n){return{templateUrl:"views/admin/partials/smalls/universal_search_box.html",restrict:"AE",link:function(n,s,a){n.mainSearchModel={queryString:"",postSearchUniqueCuid:"",requestedPage:1},n.fillSearchBox=function(){n.mainSearchModel.queryString="search"==o.$state.current.name?o.$stateParams.queryString?o.$stateParams.queryString:"":o.stateHistory.length>0&&o.stateHistory[o.stateHistory.length-1].hasOwnProperty("search")?o.stateHistory[o.stateHistory.length-1].search.queryString:""},n.fillSearchBox(),n.performMainSearch=function(){n.mainSearchModel.queryString.length>0&&(e.location.href=t.port()?"http://"+t.host()+":"+t.port()+"/#!/search/"+n.mainSearchModel.queryString+"/1":"http://"+t.host()+"/#!/search/"+n.mainSearchModel.queryString+"/1")}}}}]).directive("topNav",["$rootScope","logoutService",function(e,t){return{templateUrl:"views/admin/partials/views/top_nav.html",restrict:"AE",link:function(o,n,s){o.logoutClient=function(){t.logoutClient().success(function(t){e.responseStatusHandler(t)}).error(function(t){e.responseStatusHandler(t)})}}}}]).directive("pagerDirective",["$window","$location","$rootScope","globals",function(e,t,o,n){return{templateUrl:"views/admin/partials/smalls/pager.html",restrict:"AE",link:function(e,t,n){e.showPaging=!1,o.showThePager=function(){e.showPaging=!0},o.hideThePager=function(){e.showPaging=!1},e.pagingMaxSize=5,e.numPages=5,e.itemsPerPage=10,e.pagingTotalCount=1,o.changePagingTotalCount=function(t){e.pagingTotalCount=t},e.currentPage=o.$stateParams.pageNumber,o.$on("$stateChangeSuccess",function(t,n,s,a,r){a.name!=n.name&&(e.currentPage=o.$stateParams.pageNumber,e.pagingTotalCount=1)}),e.goToPage=function(){o.$state.go(o.$state.current.name,{pageNumber:e.currentPage}),e.goToTop()}}}}]),angular.module("adminHomeApp").directive("newPostDirective",["$filter","$rootScope","globals","PostService",function(e,t,o,n){return{templateUrl:"views/admin/partials/smalls/new_post.html",restrict:"AE",link:function(o,s,a){o.newPost=!1,o.showNewPost=function(){o.newPost=!0},t.showNewPost=function(){o.showNewPost()},o.hideNewPost=function(){o.newPost=!1},t.hideNewPost=function(){o.hideNewPost()},o.newPostModel={postHeading:"",postContent:"",postSummary:"",postTags:[]},o.validateForm=function(t){console.log(t);var n=0;return e("validatePostHeading")(o.newPostModel.postHeading,t)||n++,0==n&&(e("validatePostContent")(o.newPostModel.postContent,t)||n++),0==n&&(e("validatePostSummary")(o.newPostModel.postSummary,t)||n++),0==n&&(e("validatePostTags")(o.newPostModel.postTags,t)||0!=n||n++),0==n},o.submitNewPost=function(){if(o.validateForm(!0)){var e={postHeading:o.newPostModel.postHeading,postContent:o.newPostModel.postContent,postSummary:o.newPostModel.postSummary,postTags:o.newPostModel.postTags};n.submitNewPost(e).success(function(e){o.hideNewPost(),t.responseStatusHandler(e),o.newPostModel.postHeading="",o.newPostModel.postContent="",o.newPostModel.postSummary="",o.newPostModel.postTags=[]}).error(function(e){t.responseStatusHandler(e)})}}}}}]).directive("contentMessages",["$filter",function(e){return{template:'<span class="form-error-notice" ng-show="showSpan()"><small ng-bind="model.postContent | postContentMessages"></small></span>',restrict:"AE",scope:{model:"="},link:function(t,o,n){t.showSpan=function(){return!e("validatePostContent")(t.model.postContent)}}}}]).directive("summaryMessages",["$filter",function(e){return{template:'<span class="form-error-notice" ng-show="showSpan()"><small ng-bind="model.postSummary | postSummaryMessages"></small></span>',restrict:"AE",scope:{model:"="},link:function(t,o,n){t.showSpan=function(){return!e("validatePostSummary")(t.model.postSummary)}}}}]).directive("tagMessages",["$filter",function(e){return{template:'<span class="form-error-notice" ng-show="showSpan()"><small ng-bind="model.postTags | postTagsMessages"></small></span>',restrict:"AE",scope:{model:"="},link:function(t,o,n){t.showSpan=function(){return!e("validatePostTags")(t.model.postTags)}}}}]),angular.module("adminHomeApp").directive("postContent",["$filter","$rootScope","globals","PostService",function(e,t,o,n){return{templateUrl:"views/admin/partials/smalls/post_content.html",scope:!0,restrict:"AE",link:function(t,o,n){t.postContent=e("highlightText")(t.post.postContent)}}}]).directive("postSummary",["$filter","$rootScope","globals","PostService",function(e,t,o,n){return{templateUrl:"views/admin/partials/smalls/post_summary.html",scope:!0,restrict:"AE",link:function(t,o,n){t.postSummary=e("highlightText")(t.post.postSummary)}}}]).directive("postTags",["$filter","$rootScope","globals","PostService",function(e,t,o,n){return{templateUrl:"views/admin/partials/smalls/post_tags.html",scope:!0,restrict:"AE",link:function(t,o,n){t.postTags=t.post.postTags,t.postTags.forEach(function(t){t.text=e("highlightText")(t.text)})}}}]),angular.module("adminHomeApp").controller("HotController",["$q","$filter","$log","$interval","$window","$location","$scope","$rootScope","socket","mainService","socketService","globals","$modal","PostService","HotService","fN",function(e,t,o,n,s,a,r,i,u,c,l,g,d,m,p,h){function f(){p.getHotThisWeekFromServer().success(function(e){r.hotThisWeek=p.updateHotThisWeek(e.hotThisWeek)}).error(function(e){i.responseStatusHandler(e)})}r.hotThisWeek=p.getHotThisWeek(),f(),i.$on("reconnect",function(){f()})}]),angular.module("adminHomeApp").controller("MainController",["$q","$filter","$log","$interval","$window","$location","$scope","$rootScope","socket","mainService","socketService","globals","$modal","logoutService","PostService","$document","fN",function(e,t,o,n,s,a,r,i,u,c,l,g,d,m,p,h){function f(){l.getUserData().success(function(e){r.userData=g.userData(e.userData),r.clientIsRegistered="yes"==r.userData.isRegistered,"yes"==r.userData.isRegistered&&u.emit("joinRoom",{room:e.userData.uniqueCuid}),r.responseStatusHandler(e)}).error(function(e){r.responseStatusHandler(e)})}r.indexPageUrl=g.allData.indexPageUrl;var P=[];i.stateHistory=[],i.$on("$stateChangeSuccess",function(e,t,o,n,s){P.push(a.$$path);var r={};r[n.name]=s,i.stateHistory.push(r)}),i.back=function(){var e=P.length>1?P.splice(-2)[0]:"/";a.path(e)},r.showHideLoadingBanner=function(e){i.showHideLoadingBanner&&i.showHideLoadingBanner(e)},r.showThePager=function(e){i.showThePager&&i.showThePager(e)},r.changePagingTotalCount=function(e){i.changePagingTotalCount&&i.changePagingTotalCount(e)},r.showDisqus=-1!==a.host().search("negusmath"),i.$on("$stateChangeStart",function(e,t,o,n,s){i.clearBanners(),i.clearToasts()}),i.responseStatusHandler=function(e){t("responseFilter")(e)},i.clearBanners=function(){i.$broadcast("clearBanners")};var S=0;r.goToTop=function(){var e=angular.element(document.getElementById("top"));h.scrollToElement(e,80,S)},r.currentTime="",r.currentTime=moment().format("ddd, MMM D, H:mm");var w=function(){r.currentTime=moment().format("ddd, MMM D, H:mm")};n(w,2e4,0,!0),u.on("joined",function(){console.log("JOIN SUCCESS")}),f(),i.$on("reconnect",function(){})}]),angular.module("adminHomeApp").controller("PostsController",["$q","$filter","$log","$interval","$window","$location","$scope","$rootScope","socket","mainService","socketService","globals","$modal","PostService","fN",function(e,t,o,n,s,a,r,i,u,c,l,g,d,m,p){function h(){r.showHideLoadingBanner(!0),r.suggestedPosts=[],m.getSuggestedPostsFromServer().success(function(e){e.postsArray.length>0?(r.showSuggestedPostsOnly(),r.suggestedPosts=e.postsArray,r.suggestedPosts=t("makeVideoIframesResponsive")(null,r.suggestedPosts)):(r.suggestedPosts=[],r.showSuggestedPosts=!1,r.goToTop(),r.showHideLoadingBanner(!1))}).error(function(e){r.goToTop(),r.suggestedPosts=[],r.showSuggestedPosts=!1,i.responseStatusHandler(e)}),r.hideThePager()}function f(){r.showHideLoadingBanner(!0),m.getPostsFromServer(i.$stateParams.pageNumber).success(function(e){if(0==e.postsArray.length){r.posts=[];var o={banner:!0,bannerClass:"alert alert-dismissible alert-success",msg:"No more posts to show"};i.responseStatusHandler(o),r.mainSearchResultsPosts=!1,h(),r.goToTop()}else r.posts=m.updatePosts(e.postsArray),r.posts=t("makeVideoIframesResponsive")(null,r.posts),r.showThePostsOnly(),e.postsCount&&(r.postsCount=e.postsCount,r.changePagingTotalCount(r.postsCount)),r.showThePager()}).error(function(e){i.responseStatusHandler(e),r.posts=[],r.mainSearchResultsPosts=!1,h()})}r.showThePager(),g.defaultDocumentTitle(),r.posts=m.getCurrentPosts(),r.postsCount=m.getCurrentPostsCount(),r.suggestedPosts=[],r.mainSearchResultsPosts=!1,r.showSuggestedPosts=!1,r.showThePostsOnly=function(){r.showHideLoadingBanner(!1),r.mainSearchResultsPosts=!0,r.showSuggestedPosts=!1},r.showSuggestedPostsOnly=function(){r.showHideLoadingBanner(!1),r.mainSearchResultsPosts=!1,r.showSuggestedPosts=!0},f(),i.$on("newPost",function(e,o){1==i.$stateParams.pageNumber&&(o.post=t("makeVideoIframesResponsive")(o.post,null),r.posts.unshift(o.post)),o.postsCount&&(r.postsCount=o.postsCount,r.changePagingTotalCount(r.postsCount))}),i.$on("reconnect",function(){"home"==i.$state.current.name&&f()})}]).controller("FullPostController",["$q","$filter","$log","$interval","$window","$location","$scope","$rootScope","socket","mainService","socketService","globals","$modal","PostService","$stateParams","fN",function(e,t,o,n,s,a,r,i,u,c,l,g,d,m,p,h){function f(){r.showHideLoadingBanner(!0),r.suggestedPosts=[],m.getSuggestedPostsFromServer().success(function(e){e.postsArray.length>0?(r.showSuggestedPostsOnly(),r.suggestedPosts=e.postsArray,r.suggestedPosts=t("makeVideoIframesResponsive")(null,r.suggestedPosts)):(r.suggestedPosts=[],r.showSuggestedPosts=!1,r.goToTop(),r.showHideLoadingBanner(!1))}).error(function(e){r.goToTop(),r.suggestedPosts=[],r.showSuggestedPosts=!1,i.responseStatusHandler(e)}),r.hideThePager()}function P(){r.showHideLoadingBanner(!0),m.getPostFromServer(i.$stateParams.postIndex).success(function(e){r.post=e.thePost,i.responseStatusHandler(e),0!=h.calcObjectLength(r.post)?(r.post=t("makeVideoIframesResponsive")(r.post,null),r.post=t("AddPostUrl")(r.post,null),g.changeDocumentTitle(r.post.postHeading),r.showThePostOnly(),r.showDisqus&&(r.postIsLoaded=!0),r.hideThePager()):(r.post={},r.showPost=!1,f(),r.goToTop())}).error(function(e){i.responseStatusHandler(e),r.post={},r.showPost=!1,f()})}r.hideThePager(),r.postIndex=p.postIndex,r.post={},r.suggestedPosts=[],r.showPost=!1,r.showSuggestedPosts=!1,r.showThePostOnly=function(){r.showHideLoadingBanner(!1),r.showPost=!0,r.showSuggestedPosts=!1},r.showSuggestedPostsOnly=function(){r.showHideLoadingBanner(!1),r.showPost=!1,r.showSuggestedPosts=!0},r.postIsLoaded=!1,P(),r.editingMode=!1,r.postBackup=r.post,r.goIntoPostEditingMode=function(){r.hideThePager(),r.postBackup=r.post,r.editingMode=!0},r.goIntoFullPostViewMode=function(){r.editingMode=!1,r.hideThePager()},r.editPostHeadingLessMin=!1,r.editPostContentIsEmpty=!0,r.editPostSummaryIsEmpty=!0,r.editPostSummaryHasExceededMaximum=!1,r.checkIfEditPostHeadingLessMin=function(){if(r.post.postHeading){var e=r.post.postHeading;return r.editPostHeadingLessMin=e.length<10?!0:!1,r.editPostHeadingLessMin}return!0},r.checkIfEditPostContentIsEmpty=function(){if(r.post.postContent){var e=$("<div>"+r.post.postContent+"</div>").text();return r.editPostContentIsEmpty=0==e.length?!0:!1,r.editPostContentIsEmpty}return!0},r.checkIfEditPostSummaryIsEmpty=function(){if(r.post.postSummary){var e=$("<div>"+r.post.postSummary+"</div>").text();return r.editPostSummaryIsEmpty=0==e.length?!0:!1,r.editPostSummaryIsEmpty}return!0},r.checkEditPostSummaryMaxLength=function(e){if(r.post.postSummary){var t=$("<div>"+r.post.postSummary+"</div>").text();return r.editPostSummaryHasExceededMaximum=t.length>e?!0:!1,r.editPostSummaryHasExceededMaximum}return!0},r.checkEditPostTags=function(){var e=0,t=0;return r.post.postTags.forEach(function(o){t++,0==e&&(o.text.length<3&&0==e&&(e++,i.showToast("warning","Minimum allowed length for each tag is 3 characters")),o.text.length>30&&0==e&&(e++,i.showToast("warning","Maximum allowed length for each tag is 30 characters")))}),t>5&&0==e&&(e++,i.showToast("warning","Only a maximum of 5 tags are allowed per post")),0==e?!0:!1},r.submitPostUpdate=function(){var e=0;r.checkIfEditPostHeadingLessMin()&&0==e&&(e++,i.showToast("warning","The minimum required length of the heading is 10 characters")),r.checkIfEditPostContentIsEmpty()&&0==e&&(e++,i.showToast("warning","Please add some text to the post first")),r.checkIfEditPostSummaryIsEmpty()&&0==e&&(e++,i.showToast("warning","The post summary cannot be empty")),r.checkEditPostSummaryMaxLength()&&0==e&&(e++,i.showToast("warning","The post summary cannot exceed 2000 characters")),r.checkEditPostTags()||0!=e||e++,0==e&&m.submitPostUpdate(r.post).success(function(e){r.goIntoFullPostViewMode(),i.responseStatusHandler(e)}).error(function(e){i.responseStatusHandler(e)})},r.cancelPostUpdate=function(){r.post=r.postBackup,r.goIntoFullPostViewMode(),i.showToast("success","Update cancelled")},i.$on("postUpdate",function(e,o){i.$stateParams.postIndex==o.post.postIndex&&(o.post=t("makeVideoIframesResponsive")(o.post,null),r.post=o.post)}),i.$on("reconnect",function(){r.editingMode||"post"==i.$state.current.name&&P()})}]),angular.module("adminHomeApp").controller("SearchController",["$q","$filter","$log","$interval","$window","$location","$scope","$rootScope","socket","mainService","socketService","globals","$modal","PostService","fN",function(e,t,o,n,s,a,r,i,u,c,l,g,d,m,p){function h(){r.showHideLoadingBanner(!0),r.suggestedPosts=[],m.getSuggestedPostsFromServer().success(function(e){e.postsArray.length>0?(r.showSuggestedPostsOnly(),r.suggestedPosts=e.postsArray,r.suggestedPosts=r.suggestedPosts=t("makeVideoIframesResponsive")(null,r.suggestedPosts)):(r.suggestedPosts=[],r.showSuggestedPosts=!1,r.goToTop(),r.showHideLoadingBanner(!1))}).error(function(e){r.goToTop(),r.showHideLoadingBanner(!1),r.suggestedPosts=[],r.showSuggestedPosts=!1,i.responseStatusHandler(e)}),r.hideThePager()}function f(){r.showHideLoadingBanner(!0),r.mainSearchModel={queryString:i.$stateParams.queryString||"",postSearchUniqueCuid:"",requestedPage:i.$stateParams.pageNumber||1},m.mainSearch(r.mainSearchModel).success(function(e){var o=e.results;if(m.updateMainSearchResults(o),r.mainSearchResultsCount=o.totalResults,r.changePagingTotalCount(r.mainSearchResultsCount),r.changeCurrentPage(o.page),r.mainSearchModel.postSearchUniqueCuid=o.searchUniqueCuid,o.totalResults>0){r.mainSearchResultsPosts=o.postsArray,r.mainSearchResultsPosts=t("makeVideoIframesResponsive")(null,r.mainSearchResultsPosts),r.showMainSearchResultsOnly();var n={banner:!0,bannerClass:"alert alert-dismissible alert-success",msg:"The search returned "+r.mainSearchResultsCount+" results"};i.responseStatusHandler(n),r.showThePager()}else{r.mainSearchResultsPosts=[];var s={banner:!0,bannerClass:"alert alert-dismissible alert-success",msg:"The search returned 0 results"};i.responseStatusHandler(s),r.showMainSearchResults=!1,h(),r.goToTop()}}).error(function(e){i.responseStatusHandler(e),r.mainSearchResultsPosts=[],r.showMainSearchResults=!1,h()})}r.showThePager(),r.mainSearchModel={queryString:i.$stateParams.queryString||"",postSearchUniqueCuid:"",requestedPage:i.$stateParams.pageNumber||1},g.changeDocumentTitle(i.$stateParams.queryString+" - NegusMath Search"),r.mainSearchResultsPosts=m.getCurrentPosts(),r.mainSearchResultsCount=0,r.changeCurrentPage=function(e){e!=i.$stateParams.pageNumber},r.suggestedPosts=[],r.showMainSearchResults=!1,r.showSuggestedPosts=!1,r.showMainSearchResultsOnly=function(){r.showHideLoadingBanner(!1),r.showMainSearchResults=!0,r.showSuggestedPosts=!1},r.showSuggestedPostsOnly=function(){r.showHideLoadingBanner(!1),r.showMainSearchResults=!1,r.showSuggestedPosts=!0},f(),r.checkIfPostsSearchResultsIsEmpty=function(){return 0==r.mainSearchResultsPosts.length},i.$on("reconnect",function(){"search"==i.$state.current.name&&f()})}]),angular.module("adminHomeApp").filter("timeago",function(){return function(e,t,o){if(!e)return"never";if(t||(t=Date.now()),angular.isDate(e)?e=e.getTime():"string"==typeof e&&(e=new Date(e).getTime()),angular.isDate(t)?t=t.getTime():"string"==typeof t&&(t=new Date(t).getTime()),"number"==typeof e&&"number"==typeof t){var n=Math.abs((t-e)/1e3),s=[],a=60,r=3600,i=86400,u=604800,c=31556926,l=315569260;return s=a>=n?["",o?"now":"less than a minute"]:60*a>n?[Math.round(Math.abs(n/a)),"min"]:24*r>n?[Math.round(Math.abs(n/r)),"hr"]:7*i>n?[Math.round(Math.abs(n/i)),"day"]:52*u>n?[Math.round(Math.abs(n/u)),"week"]:10*c>n?[Math.round(Math.abs(n/c)),"year"]:100*l>n?[Math.round(Math.abs(n/l)),"decade"]:["","a long time"],s[1]+=0===s[0]||s[0]>1?"s":"",s=s.join(" "),o===!0?s:t>=e?s+" ago":"in "+s}}}).filter("AddTimeAgo",["$filter",function(e){return function(t){return e("timeago")(t)}}]).filter("AddPostDate",["$filter",function(){return function(e){return moment(e).format("ddd, MMM D, H:mm")}}]).filter("AddPostUrl",["$filter",function(){return function(e,t){function o(e){return e.postIndex&&(e.postUrl="http://www.negusmath.com/#!/post/"+e.postIndex),e}return e?o(e):t?(t.forEach(function(e){e=o(e)}),t):void 0}}]).filter("makeVideoIframesResponsive",["$filter",function(){return function(e,t){function o(e){return e.postSummary&&(n=$("<div>"+e.postSummary+"</div>"),s=$("img.ta-insert-video",n),s.length>0&&(a=s.addClass("embed-responsive-item").wrap("<div class='embed-responsive embed-responsive-16by9'></div>"),n.find("img").replaceWith(a)),e.postSummary=n.html()),e.postContent&&(n=$("<div>"+e.postContent+"</div>"),s=$("img.ta-insert-video",n),s.length>0&&(a=s.addClass("embed-responsive-item").wrap("<div class='embed-responsive embed-responsive-16by9'></div>"),n.find("img").replaceWith(a)),e.postContent=n.html()),e}var n,s,a;return e?o(e):t?(t.forEach(function(e){e=o(e)}),t):void 0}}]).filter("highlightText",["$filter","$rootScope",function(e,t){return function(e){function o(){return"search"==t.$state.current.name?{status:!0,queryString:t.$stateParams.queryString||""}:t.stateHistory.length>0&&t.stateHistory[t.stateHistory.length-1].hasOwnProperty("search")?{status:!0,queryString:t.stateHistory[t.stateHistory.length-1].search.queryString}:{status:!1}}function n(e){var t=e,n=o();if(n.status===!0){var s=$("<div>"+e+"</div>");$(s).highlight(n.queryString),t=s.html()}else{var a=$("<div>"+e+"</div>");$(a).removeHighlight(),t=a.html()}return t}return n(e)}}]).filter("responseFilter",["$q","$filter","$log","$interval","$window","$location","$rootScope","globals",function(e,t,o,n,s,a,r,i){return function(e){function t(e,t,o){return{show:e?!0:!1,bannerClass:t,msg:o}}return e&&(e.redirect&&e.redirect&&(s.location.href=e.redirectPage),e.notify&&e.type&&e.msg&&r.showToast(e.type,e.msg),e.banner&&e.bannerClass&&e.msg&&r.$broadcast("universalBanner",t(!0,e.bannerClass,e.msg)),e.newPostBanner&&e.bannerClass&&e.msg&&r.$broadcast("newPostBanner",t(!0,e.bannerClass,e.msg)),e.registrationBanner&&e.bannerClass&&e.msg&&r.$broadcast("registrationBanner",t(!0,e.bannerClass,e.msg)),e.reason&&o.warn(e.reason)),!0}}]),angular.module("adminHomeApp").filter("validatePostHeading",["$filter","$rootScope",function(e,t){return function(e,o){function n(e,n){o&&t.showToast(e,n)}var s=0;return 0==e.length&&(s++,n("warning","The minimum required length of the heading is 10 characters")),0==s&&e.length<10&&(n("warning","The minimum required length of the heading is 10 characters"),s++),0==s}}]).filter("validatePostContent",["$filter","$rootScope",function(e,t){return function(e,o){function n(e,n){o&&t.showToast(e,n)}var s=$("<div>"+e+"</div>").text();return 0==s.length&&n("warning","Please add some text to the post first"),s.length>0}}]).filter("postContentMessages",["$filter","$rootScope",function(e,t){return function(e){var t=$("<div>"+e+"</div>").text();return 0==t.length?"This is a required field. Please add some text":""}}]).filter("validatePostSummary",["$filter","$rootScope",function(e,t){return function(e,o){function n(e,n){o&&t.showToast(e,n)}var s=0,a=$("<div>"+e+"</div>").text();return 0==a.length&&(s++,n("warning","The post summary cannot be empty")),0==s&&a.length>2e3&&(s++,n("warning","The post summary cannot exceed 2000 characters")),0==s}}]).filter("postSummaryMessages",["$filter","$rootScope",function(e,t){return function(e){function t(e){o?o=o+": "+e:o+=e}var o="",n=$("<div>"+e+"</div>").text();return 0==n.length&&t("The post summary cannot be empty"),n.length>2e3&&t("The post summary cannot exceed 2000 characters"),o}}]).filter("validatePostTags",["$filter","$rootScope",function(e,t){return function(e,o){function n(e,n){o&&t.showToast(e,n)}var s=0,a=0;return e.forEach(function(e){a++,e&&e.text&&(0==s&&e.text.length<3&&(s++,n("warning","Minimum required length for each tag is 3 characters")),0==s&&e.text.length>30&&(s++,n("warning","Maximum allowed length for each tag is 30 characters")))}),0==s&&a>5&&(s++,n("warning","Only a maximum of 5 tags are allowed per post")),0==s}}]).filter("postTagsMessages",["$filter","$rootScope",function(e,t){return function(e){function t(e){o?o=o+": "+e:o+=e}var o="",n=0;return e.forEach(function(e){n++,e&&e.text&&(e.text.length<3&&t("Minimum required length for each tag is 3 characters"),e.text.length>30&&t("Maximum allowed length for each tag is 30 characters"))}),n>5&&t("Only a maximum of 5 tags are allowed per post"),o}}]),angular.module("adminHomeApp").factory("fN",["$q","$location","$window","$rootScope","socketService",function(e,t,o,n,s){return{calcObjectLength:function(e){var t=0;for(var o in e)e.hasOwnProperty(o)&&t++;return t}}}]),angular.module("adminHomeApp").factory("globals",["$q","$location","$window","$rootScope","socketService",function(e,t,o,n,s){var a={},r={documentTitle:"Negus Math - College Level Advanced Mathematics for Kenya Students",indexPageUrl:t.port()?"http://"+t.host()+":"+t.port()+"/index":$scope.indexPageUrl="http://"+t.host()+"/index"};return{userData:function(e){return e?a=e:a},allData:r,getDocumentTitle:function(){return r.documentTitle},defaultDocumentTitle:function(){r.documentTitle="Negus Math - College Level Advanced Mathematics for Kenya Students"},changeDocumentTitle:function(e){return e&&(r.documentTitle=e),r.documentTitle}}}]),angular.module("adminHomeApp").factory("HotService",["$log","$http","$window","$rootScope","socket","socketService","globals",function(e,t,o,n,s,a,r){var i=[];return s.on("hotThisWeekPosts",function(e){n.$broadcast("hotThisWeekPosts",e)}),{getHotThisWeek:function(){return i},getHotThisWeekFromServer:function(){return t.post("/api/getHotThisWeek",{})},updateHotThisWeek:function(e){return i=e,e}}}]),angular.module("adminHomeApp").factory("mainService",["$log","$window","$rootScope","socket","socketService","globals",function(e,t,o,n,s,a){return n.on("reconnect",function(){e.info("'reconnect sequence' triggered"),o.$broadcast("reconnect")}),{done:function(){return 1}}}]),angular.module("adminHomeApp").factory("PostService",["$log","$http","$window","$rootScope","socket","socketService","globals",function(e,t,o,n,s,a,r,i){var u=[],c=0,l=[];return s.on("newPost",function(e){n.$broadcast("newPost",e)}),s.on("postUpdate",function(e){n.$broadcast("postUpdate",e)}),{getCurrentPosts:function(){return u},getCurrentPostsCount:function(){return c},getPostsFromServer:function(e){return t.post("/api/getPosts",{page:e})},getSuggestedPostsFromServer:function(){return t.post("/api/getSuggestedPosts",{})},updatePosts:function(e){return u=e,e},getPostFromServer:function(e){return t.post("/api/getPost",{postIndex:e})},submitNewPost:function(e){return t.post("/api/newPost",{newPost:e})},submitPostUpdate:function(e){return t.post("/api/updatePost",{postUpdate:e})},getCurrentMainSearchResults:function(){return l},updateMainSearchResults:function(e){return l=e},mainSearch:function(e){return t.post("/api/mainSearch",e)}}}]),angular.module("adminHomeApp").factory("socket",["$log","$location","$rootScope",function(e,t,o){var n;n=t.port()?t.host()+":"+t.port():t.host();var s=io.connect(n);return{on:function(e,t){s.on(e,function(){var e=arguments;o.$apply(function(){t.apply(s,e)})})},emit:function(e,t,n){s.emit(e,t,function(){var e=arguments;o.$apply(function(){n&&n.apply(s,e)})})},removeAllListeners:function(e,t){s.removeAllListeners(e,function(){var e=arguments;o.$apply(function(){t.apply(s,e)})})}}}]).factory("socketService",["$log","$http","$rootScope",function(e,t,o){return{getUserData:function(){return t.get("/api/getUserData")},sendContactUs:function(e){return t.post("/contactUs",e)}}}]).factory("logoutService",["$http",function(e){return{logoutClient:function(){return e.post("/api/logoutClient")}}}]);
//# sourceMappingURL=concatenated.min.js.map