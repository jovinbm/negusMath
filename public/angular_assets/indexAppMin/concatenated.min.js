angular.module("indexApp",["ui.bootstrap","angular-loading-bar","angulartics","angulartics.google.analytics","angularMoment","ui.router","duScroll","ngFx","ngAnimate","ui.utils"]).run(["$templateCache","$http",function(e,t){}]),angular.module("indexApp").directive("universalBanner",["$rootScope",function(e){return{templateUrl:"views/admin/partials/smalls/universal_banner.html",restrict:"AE",link:function(t,n,r){t.universalBanner={show:!1,bannerClass:"",msg:""},e.$on("universalBanner",function(e,n){t.universalBanner=n}),e.$on("clearBanners",function(){t.universalBanner={show:!1,bannerClass:"",msg:""}})}}}]).directive("toastrDirective",["$rootScope",function(e){return{restrict:"AE",link:function(t,n,r){e.showToast=function(e,t){switch(e){case"success":toastr.clear(),toastr.success(t);break;case"warning":toastr.clear(),toastr.warning(t,"Warning",{closeButton:!0,tapToDismiss:!0});break;case"error":toastr.clear(),toastr.error(t,"Error",{closeButton:!0,tapToDismiss:!0,timeOut:!1});break;default:toastr.clear()}},e.clearToasts=function(){toastr.clear()}}}}]).directive("loadingBanner",["$rootScope",function(e){var t=["$scope","$rootScope","cfpLoadingBar",function(e,t,n){t.isLoading=!1,t.isLoadingPercentage=0,t.changeIsLoadingPercentage=function(e){t.isLoadingPercentage=e},t.showHideLoadingBanner=function(e){e?($("#loading-splash-card").removeClass("hidden"),$(".hideMobileLoading").addClass("hidden-xs hidden-sm")):($("#loading-splash-card").addClass("hidden"),$(".hideMobileLoading").removeClass("hidden-xs hidden-sm"))},t.$on("cfpLoadingBar:loading",function(e,r){t.isLoadingPercentage=100*n.status()}),t.$on("cfpLoadingBar:loaded",function(e,r){t.isLoadingPercentage=100*n.status()}),t.$on("cfpLoadingBar:completed",function(e,r){t.isLoadingPercentage=100*n.status()}),t.isLoadingTrue=function(){t.isLoading=!0},t.isLoadingFalse=function(){t.isLoading=!1},t.$on("isLoadingTrue",function(){t.isLoading=!0}),t.$on("isLoadingFalse",function(){t.isLoading=!1})}];return{templateUrl:"views/admin/partials/smalls/loading_banner.html",restrict:"AE",controller:t}}]),angular.module("indexApp").directive("universalSearchBox",["$window","$location","$rootScope","globals",function(e,t,n,r){return{templateUrl:"views/admin/partials/smalls/universal_search_box.html",restrict:"AE",link:function(r,o,a){r.mainSearchModel={queryString:"",postSearchUniqueCuid:"",requestedPage:1},r.fillSearchBox=function(){r.mainSearchModel.queryString="search"==n.$state.current.name?n.$stateParams.queryString?n.$stateParams.queryString:"":n.stateHistory.length>0&&n.stateHistory[n.stateHistory.length-1].hasOwnProperty("search")?n.stateHistory[n.stateHistory.length-1].search.queryString:""},r.fillSearchBox(),r.performMainSearch=function(){r.mainSearchModel.queryString.length>0&&(e.location.href=t.port()?"http://"+t.host()+":"+t.port()+"/#!/search/"+r.mainSearchModel.queryString+"/1":"http://"+t.host()+"/#!/search/"+r.mainSearchModel.queryString+"/1")}}}}]).directive("topNav",["$rootScope","logoutService",function(e,t){return{templateUrl:"views/index/views/top_nav.html",restrict:"AE",link:function(n,r,o){n.logoutClient=function(){t.logoutClient().success(function(t){e.responseStatusHandler(t)}).error(function(t){e.responseStatusHandler(t)})}}}}]).directive("accountOuter",["$rootScope",function(e,t){return{templateUrl:"views/index/views/account_outer.html",restrict:"AE",link:function(e,t,n){e.userLoginState="signIn",e.changeUserLoginState=function(t){e.userLoginState=t}}}}]).directive("signIn",["$rootScope","socketService",function(e,t){return{templateUrl:"views/index/views/sign_in.html",restrict:"AE",link:function(n,r,o){n.loginFormModel={username:"",password:""},n.submitLocalLoginForm=function(){t.localUserLogin(n.loginFormModel).success(function(t){e.responseStatusHandler(t)}).error(function(t){n.loginFormModel.password="",e.responseStatusHandler(t)})}}}}]).directive("createAccount",["$rootScope","socketService",function(e,t){return{templateUrl:"views/index/views/create_account.html",restrict:"AE",link:function(n,r,o){n.registrationDetails={email:"",firstName:"",lastName:"",username:"",password1:"",password2:"",invitationCode:""},n.createAccount=function(){t.createAccount(n.registrationDetails).success(function(t){e.responseStatusHandler(t)}).error(function(t){n.registrationDetails.password1="",n.registrationDetails.password2="",n.registrationDetails.invitationCode="",e.responseStatusHandler(t)})}}}}]).directive("contactUs",["$rootScope","socketService",function(e,t){return{templateUrl:"views/index/views/create_account.html",restrict:"AE",link:function(n,r,o){function a(t,n,r){var o=0;return t&&0!=t.length?n&&0!=n.length?r&&0!=r.length?0==o?1:void 0:(++o,e.showToast("warning","Message field is empty"),-1):(++o,e.showToast("warning","Please enter a valid email"),-1):(++o,e.showToast("warning","Please enter your name"),-1)}n.contactUsModel={name:"",email:"",message:""},n.sendContactUs=function(){var r=a(n.contactUsModel.name,n.contactUsModel.email,n.contactUsModel.message);1==r&&t.sendContactUs(n.contactUsModel).success(function(t){n.contactUsModel.name="",n.contactUsModel.email="",n.contactUsModel.message="",e.responseStatusHandler(t)}).error(function(t){e.responseStatusHandler(t)})}}}}]),angular.module("indexApp").controller("MainController",["$q","$filter","$log","$interval","$window","$location","$scope","$rootScope","socket","mainService","socketService","globals",function(e,t,n,r,o,a,i,s,c,u,l,d){function g(){l.getUserData().success(function(e){i.userData=d.userData(e.userData),i.clientIsRegistered="yes"==i.userData.isRegistered,"yes"==i.userData.isRegistered&&c.emit("joinRoom",{room:e.userData.uniqueCuid}),s.responseStatusHandler(e)}).error(function(e){s.responseStatusHandler(e)})}i.indexPageUrl=d.allData.indexPageUrl,s.responseStatusHandler=function(e){t("responseFilter")(e)},i.clientIsRegistered=!0,c.on("joined",function(){console.log("JOIN SUCCESS")}),g(),s.$on("reconnectSuccess",function(){})}]),angular.module("indexApp").filter("timeago",function(){return function(e,t,n){if(!e)return"never";if(t||(t=Date.now()),angular.isDate(e)?e=e.getTime():"string"==typeof e&&(e=new Date(e).getTime()),angular.isDate(t)?t=t.getTime():"string"==typeof t&&(t=new Date(t).getTime()),"number"==typeof e&&"number"==typeof t){var r=Math.abs((t-e)/1e3),o=[],a=60,i=3600,s=86400,c=604800,u=31556926,l=315569260;return o=a>=r?["",n?"now":"less than a minute"]:60*a>r?[Math.round(Math.abs(r/a)),"min"]:24*i>r?[Math.round(Math.abs(r/i)),"hr"]:7*s>r?[Math.round(Math.abs(r/s)),"day"]:52*c>r?[Math.round(Math.abs(r/c)),"week"]:10*u>r?[Math.round(Math.abs(r/u)),"year"]:100*l>r?[Math.round(Math.abs(r/l)),"decade"]:["","a long time"],o[1]+=0===o[0]||o[0]>1?"s":"",o=o.join(" "),n===!0?o:t>=e?o+" ago":"in "+o}}}).filter("AddTimeAgo",["$filter",function(e){return function(t){return e("timeago")(t)}}]).filter("AddPostDate",["$filter",function(){return function(e){return moment(e).format("ddd, MMM D, H:mm")}}]).filter("AddPostUrl",["$filter",function(){return function(e,t){function n(e){return e.postIndex&&(e.postUrl="http://www.negusmath.com/#!/post/"+e.postIndex),e}return e?n(e):t?(t.forEach(function(e){e=n(e)}),t):void 0}}]).filter("makeVideoIframesResponsive",["$filter",function(){return function(e,t){function n(e){return e.postSummary&&(r=$("<div>"+e.postSummary+"</div>"),o=$("img.ta-insert-video",r),o.length>0&&(a=o.addClass("embed-responsive-item").wrap("<div class='embed-responsive embed-responsive-16by9'></div>"),r.find("img").replaceWith(a)),e.postSummary=r.html()),e.postContent&&(r=$("<div>"+e.postContent+"</div>"),o=$("img.ta-insert-video",r),o.length>0&&(a=o.addClass("embed-responsive-item").wrap("<div class='embed-responsive embed-responsive-16by9'></div>"),r.find("img").replaceWith(a)),e.postContent=r.html()),e}var r,o,a;return e?n(e):t?(t.forEach(function(e){e=n(e)}),t):void 0}}]).filter("highlightText",["$filter","$rootScope",function(e,t){return function(e){function n(){return"search"==t.$state.current.name?{status:!0,queryString:t.$stateParams.queryString||""}:t.stateHistory.length>0&&t.stateHistory[t.stateHistory.length-1].hasOwnProperty("search")?{status:!0,queryString:t.stateHistory[t.stateHistory.length-1].search.queryString}:{status:!1}}function r(e){var t=e,r=n();if(r.status===!0){var o=$("<div>"+e+"</div>");$(o).highlight(r.queryString),t=o.html()}else{var a=$("<div>"+e+"</div>");$(a).removeHighlight(),t=a.html()}return t}return r(e)}}]).filter("responseFilter",["$q","$filter","$log","$interval","$window","$location","$rootScope","globals",function(e,t,n,r,o,a,i,s){return function(e){function t(e,t,n){return{show:e?!0:!1,bannerClass:t,msg:n}}return i.universalDisable=!1,e&&(e.redirect&&e.redirect&&(o.location.href=e.redirectPage),e.disable&&(i.universalDisable=!0),e.notify&&e.type&&e.msg&&i.showToast(e.type,e.msg),e.banner&&e.bannerClass&&e.msg&&i.$broadcast("universalBanner",t(!0,e.bannerClass,e.msg)),e.newPostBanner&&e.bannerClass&&e.msg&&i.$broadcast("newPostBanner",t(!0,e.bannerClass,e.msg)),e.registrationBanner&&e.bannerClass&&e.msg&&i.$broadcast("registrationBanner",t(!0,e.bannerClass,e.msg)),e.reason&&n.warn(e.reason)),!0}}]),angular.module("indexApp").factory("fN",["$q","$location","$window","$rootScope","socketService",function(e,t,n,r,o){return{calcObjectLength:function(e){var t=0;for(var n in e)e.hasOwnProperty(n)&&t++;return t}}}]),angular.module("indexApp").factory("globals",["$q","$location","$window","$rootScope","socketService",function(e,t,n,r,o){var a={},i={documentTitle:"Negus Math - College Level Advanced Mathematics for Kenya Students",indexPageUrl:t.port()?"http://"+t.host()+":"+t.port()+"/index":$scope.indexPageUrl="http://"+t.host()+"/index"};return{userData:function(e){return e?a=e:a},allData:i,getDocumentTitle:function(){return i.documentTitle},defaultDocumentTitle:function(){i.documentTitle="Negus Math - College Level Advanced Mathematics for Kenya Students"},changeDocumentTitle:function(e){return e&&(i.documentTitle=e),i.documentTitle}}}]),angular.module("indexApp").factory("mainService",["$log","$window","$rootScope","socket","socketService","globals",function(e,t,n,r,o,a){return r.on("reconnect",function(){e.info("'reconnect sequence' triggered"),n.$broadcast("reconnectSuccess")}),{done:function(){return 1}}}]),angular.module("indexApp").factory("socket",["$log","$location","$rootScope",function(e,t,n){var r;r=t.port()?t.host()+":"+t.port():t.host();var o=io.connect(r);return{on:function(e,t){o.on(e,function(){var e=arguments;n.$apply(function(){t.apply(o,e)})})},emit:function(e,t,r){o.emit(e,t,function(){var e=arguments;n.$apply(function(){r&&r.apply(o,e)})})},removeAllListeners:function(e,t){o.removeAllListeners(e,function(){var e=arguments;n.$apply(function(){t.apply(o,e)})})}}}]).factory("socketService",["$log","$http","$rootScope",function(e,t,n){return{getUserData:function(){return t.get("/api/getUserData")},createAccount:function(e){return t.post("/createAccount",e)},localUserLogin:function(e){return t.post("/localUserLogin",e)},sendContactUs:function(e){return t.post("/contactUs",e)}}}]).factory("logoutService",["$http",function(e){return{logoutClient:function(){return e.post("/api/logoutClient")}}}]);
//# sourceMappingURL=concatenated.min.js.map