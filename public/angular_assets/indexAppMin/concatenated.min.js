angular.module("indexApp",["ui.bootstrap","angular-loading-bar","angulartics","angulartics.google.analytics","angularMoment","ui.router","duScroll","ngFx","ngAnimate","ui.utils"]).run(["$templateCache","$http",function(e,n){}]),angular.module("indexApp").filter("timeago",function(){return function(e,n,t){if(!e)return"never";if(n||(n=Date.now()),angular.isDate(e)?e=e.getTime():"string"==typeof e&&(e=new Date(e).getTime()),angular.isDate(n)?n=n.getTime():"string"==typeof n&&(n=new Date(n).getTime()),"number"==typeof e&&"number"==typeof n){var o=Math.abs((n-e)/1e3),a=[],s=60,r=3600,i=86400,c=604800,u=31556926,l=315569260;return a=s>=o?["",t?"now":"less than a minute"]:60*s>o?[Math.round(Math.abs(o/s)),"min"]:24*r>o?[Math.round(Math.abs(o/r)),"hr"]:7*i>o?[Math.round(Math.abs(o/i)),"day"]:52*c>o?[Math.round(Math.abs(o/c)),"week"]:10*u>o?[Math.round(Math.abs(o/u)),"year"]:100*l>o?[Math.round(Math.abs(o/l)),"decade"]:["","a long time"],a[1]+=0===a[0]||a[0]>1?"s":"",a=a.join(" "),t===!0?a:n>=e?a+" ago":"in "+a}}}),angular.module("indexApp").controller("MainController",["$q","$filter","$log","$interval","$window","$location","$scope","$rootScope","socket","mainService","socketService","globals","$modal","logoutService",function(e,n,t,o,a,s,r,i,c,u,l,g,d,f){function p(){r.isLoadingTrue(),l.getUserData().success(function(e){r.userData=g.userData(e.userData),r.clientIsRegistered="yes"==r.userData.isRegistered?!0:!1,r.isRandomClient=r.userData.isRandomClient?!0:!1,"yes"==r.userData.isRegistered&&c.emit("joinRoom",{room:e.userData.uniqueCuid}),r.responseStatusHandler(e),r.isLoadingFalse()}).error(function(e){r.responseStatusHandler(e),r.isLoadingFalse()})}function m(e,n,t){var o=0;return e&&0!=e.length?n&&0!=n.length?t&&0!=t.length?0==o?1:void 0:(++o,r.showToast("warning","Message field is empty"),-1):(++o,r.showToast("warning","Please enter a valid email"),-1):(++o,r.showToast("warning","Please enter your name"),-1)}r.indexPageUrl=s.port()?"http://"+s.host()+":"+s.port()+"/index":"http://"+s.host()+"/index",r.universalDisable=!1,r.showBanner=!1,r.bannerClass="",r.bannerMessage="",r.showRegistrationBanner=!1,r.registrationBannerClass="",r.registrationBannerMessage="",r.universalDisableTrue=function(){r.universalDisable=!0},r.universalDisableFalse=function(){r.universalDisable=!1},r.responseStatusHandler=function(e){e&&(e.redirect&&e.redirect&&(a.location.href=e.redirectPage),e.disable&&e.disable&&r.universalDisableTrue(),e.notify&&e.type&&e.msg&&r.showToast(e.type,e.msg),e.banner&&e.bannerClass&&e.msg&&(r.showBanner=!0,r.bannerClass=e.bannerClass,r.bannerMessage=e.msg),e.registrationBanner&&e.bannerClass&&e.msg&&(r.showRegistrationBanner=!0,r.registrationBannerClass=e.bannerClass,r.registrationBannerMessage=e.msg),e.reason&&t.warn(e.reason))},i.$on("responseStatusHandler",function(e,n){r.responseStatusHandler(n)}),r.isLoading=!1,r.isLoadingTrue=function(){r.isLoading=!0},r.isLoadingFalse=function(){r.isLoading=!1},i.$on("isLoadingTrue",function(){r.isLoading=!0}),i.$on("isLoadingFalse",function(){r.isLoading=!1}),r.showToast=function(e,n){switch(e){case"success":toastr.clear(),toastr.success(n);break;case"warning":toastr.clear(),toastr.warning(n,"Warning",{closeButton:!0,tapToDismiss:!0});break;case"error":toastr.clear(),toastr.error(n,"Error",{closeButton:!0,tapToDismiss:!0,timeOut:!1});break;default:toastr.clear()}},i.$on("showToast",function(e,n){var t=n.toastType,o=n.text;r.showToast(t,o)}),r.clientIsRegistered=!0,c.on("joined",function(){console.log("JOIN SUCCESS")}),p(),r.userLoginState="signIn",r.changeUserLoginState=function(e){r.userLoginState=e},r.loginFormModel={username:"",password:""},r.submitLocalLoginForm=function(){l.localUserLogin(r.loginFormModel).success(function(e){r.responseStatusHandler(e)}).error(function(e){r.loginFormModel.password="",r.responseStatusHandler(e)})},r.registrationDetails={email:"",firstName:"",lastName:"",username:"",password1:"",password2:"",invitationCode:""},r.createAccount=function(){l.createAccount(r.registrationDetails).success(function(e){r.responseStatusHandler(e)}).error(function(e){r.registrationDetails.password1="",r.registrationDetails.password2="",r.registrationDetails.invitationCode="",r.responseStatusHandler(e)})},r.contactUsModel={name:"",email:"",message:""},r.sendContactUs=function(){var e=m(r.contactUsModel.name,r.contactUsModel.email,r.contactUsModel.message);1==e&&l.sendContactUs(r.contactUsModel).success(function(e){r.contactUsModel.name="",r.contactUsModel.email="",r.contactUsModel.message="",r.responseStatusHandler(e)}).error(function(e){r.responseStatusHandler(e)})},r.logoutClient=function(){f.logoutClient().success(function(e){r.responseStatusHandler(e)}).error(function(e){r.responseStatusHandler(e)})},i.$on("reconnectSuccess",function(){}),t.info("MainController booted successfully")}]),angular.module("indexApp").factory("globals",["$window","$rootScope","socketService",function(e,n,t){var o={};return{userData:function(e){return e?o=e:o}}}]),angular.module("indexApp").factory("mainService",["$log","$window","$rootScope","socket","socketService","globals",function(e,n,t,o,a,s){return o.on("reconnect",function(){e.info("'reconnect sequence' triggered"),t.$broadcast("reconnectSuccess")}),{done:function(){return 1}}}]),angular.module("indexApp").factory("socket",["$log","$location","$rootScope",function(e,n,t){var o;o=n.port()?n.host()+":"+n.port():n.host();var a=io.connect(o);return{on:function(e,n){a.on(e,function(){var e=arguments;t.$apply(function(){n.apply(a,e)})})},emit:function(e,n,o){a.emit(e,n,function(){var e=arguments;t.$apply(function(){o&&o.apply(a,e)})})},removeAllListeners:function(e,n){a.removeAllListeners(e,function(){var e=arguments;t.$apply(function(){n.apply(a,e)})})}}}]).factory("socketService",["$log","$http","$rootScope",function(e,n,t){return{getUserData:function(){return n.get("/api/getUserData")},createAccount:function(e){return n.post("/createAccount",e)},localUserLogin:function(e){return n.post("/localUserLogin",e)},sendContactUs:function(e){return n.post("/contactUs",e)}}}]).factory("logoutService",["$http",function(e){return{logoutClient:function(){return e.post("/api/logoutClient")}}}]);
//# sourceMappingURL=concatenated.min.js.map